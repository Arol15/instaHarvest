(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{114:function(e,t,c){},115:function(e,t,c){},116:function(e,t,c){},137:function(e,t,c){},138:function(e,t,c){},139:function(e,t,c){},140:function(e,t,c){},141:function(e,t,c){},142:function(e,t,c){},143:function(e,t,c){"use strict";c.r(t);var n,a=c(2),s=c.n(a),i=c(23),r=c.n(i),o=(c(49),c(12)),l=c(13),d=c(1),j=function(){var e=Object(l.f)();return Object(d.jsx)("div",{children:Object(d.jsx)("button",{onClick:function(){return e.push("/add-product")},children:"Share"})})},u=c(4),b=c(21),m=c(8),p=function(e,t,c){var n=Object(a.useState)(Object(m.a)({},e)),s=Object(u.a)(n,2),i=s[0],r=s[1],o=Object(a.useState)({}),l=Object(u.a)(o,2),d=l[0],j=l[1];return[r,function(e){e&&e.preventDefault();var n=c(i),a=0===Object.keys(n).length;j(n),a&&t()},function(e){r(Object(m.a)(Object(m.a)({},i),{},Object(b.a)({},e.target.name,e.target.value)))},i,d]},O=c(46),h=c.n(O),f=c(70),x=c(38),g=c.n(x),v=c(6),_=function(){return new Promise((function(e,t){g.a.post("/api/auth/logout",{}).then((function(){localStorage.removeItem("status"),localStorage.removeItem("app_data"),e(!0)})).catch((function(){t("Something went wrong")}))}))},N=function(){return"loggedIn"===localStorage.getItem("status")},w=function(e,t){switch(t.type){case"SEND":return Object(m.a)(Object(m.a)({},e),{},{isLoading:!0,errorNum:null,error:null,data:null});case"RESPONSE":return{isLoading:!1,data:t.responseData,errorNum:null,error:null};case"ERROR":return{data:null,isLoading:!1,error:t.errorMessage,errorNum:t.errorNum};case"LOGOUT":return{isLoading:!1,errorNum:null,error:null,data:null};default:return}},y=function(){var e=Object(a.useReducer)(w,{isLoading:!1,error:null,errorNum:null,data:null}),t=Object(u.a)(e,2),c=t[0],n=t[1],s=Object(l.f)(),i=(Object(v.c)(),Object(a.useCallback)(function(){var e=Object(f.a)(h.a.mark((function e(t,c,a){var i,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"SEND"}),i={method:c,url:t,data:a,timeout:5e3},e.next=4,g()(i).then((function(e){return e}),(function(e){return e.response}));case 4:if(r=e.sent){e.next=8;break}return n({type:"ERROR",errorMessage:"Something went wrong",errorNum:500}),e.abrupt("return");case 8:401===r.status&&"unauthorized"===r.data.error&&_().then((function(){n({type:"LOGOUT"}),s.push("/login")})).catch((function(e){n({type:"ERROR",errorMessage:r.data.error,errorNum:r.status})})),r.status>=200&&r.status<300?n({type:"RESPONSE",responseData:r.data}):r.data.error?n({type:"ERROR",errorMessage:r.data.error,errorNum:r.status}):401===r.status?n({type:"ERROR",errorMessage:"Authorization denied. Please sign in or sign up",errorNum:401}):403===r.status?n({type:"ERROR",errorMessage:"Not enough privileges",errorNum:403}):n({type:"ERROR",errorMessage:"Something went wrong",errorNum:r.status});case 10:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),[]));return[c.isLoading,c.data,c.error,c.errorNum,i]},C=function(e){var t={};return e.password&&e.confirm_pass&&(e.password!==e.confirm_pass&&(t.confirm_pass="Passwords don't match"),/^[A-z0-9.!?,+]{6,}$/i.test(e.password)||(t.confirm_pass="Password should be at least 6 characters. Allowed characters: A-z 0-9 . , ! ? +")),Object.entries(e).forEach((function(e){var c=Object(u.a)(e,2),n=c[0],a=c[1];"username"===n&&(/^[a-z0-9._]{0,}$/.test(a)||(t.username="Allowed characters: a-z 0-9 . _")),"password"===n&&(a||(t.password="Please enter your password")),"confirm_pass"===n&&(a||(t.confirm_pass="Passwords don't match")),"login"===n&&(a||(t.login="Please enter your username or email")),"email"===n&&(a?/^[A-Z0-9.,_%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(a)||(t.email="Invalid email address"):t.email="Enter your email"),"first_name"===n&&(a||(t.first_name="Please enter you name")),"us_state"===n&&(a||(t.us_state="Please select state")),"city"===n&&(a||(t.city="Please enter city")),"body"===n&&(a||(t.body="Please enter something")),"search_term"===n&&(a?a.length<2&&(t.search_term="Your location is too short"):t.search_term="Please enter location"),"profile_addr"===n&&(a||(t.profile_addr="Field cannot be empty")),"name"===n&&(a||(t.name="Please enter name")),"product_type"===n&&(a||(t.product_type="Please select product type")),"description"===n&&(a||(t.description="Please describe your product")),"url"===n&&(a||(t.url="Please enter image url"))})),t},k=c(28),S=Object(k.b)({name:"modal",initialState:{open:!1,msg:null,timeOut:null,classes:null},reducers:{showMsg:function(e,t){var c=t.payload,n=c.msg,a=c.timeOut,s=c.classes;e.open=!0,e.msg=n,e.timeOut=a,e.classes=s},clearMsg:function(e){e.open=!1,e.msg=null,e.timeOut=null,e.classes=null}}}),E=S.actions,P=E.showMsg,I=E.clearMsg,M=function(e){return{open:e.modal.open,msg:e.modal.msg,timeOut:e.modal.timeOut,classes:e.modal.classes}},T=S.reducer,A=(c(114),function(e){return Object(d.jsx)("div",{className:"center",children:Object(d.jsxs)("div",{className:"indicator",children:[Object(d.jsx)("div",{className:"ind-chase-dot"}),Object(d.jsx)("div",{className:"ind-chase-dot"}),Object(d.jsx)("div",{className:"ind-chase-dot"}),Object(d.jsx)("div",{className:"ind-chase-dot"}),Object(d.jsx)("div",{className:"ind-chase-dot"}),Object(d.jsx)("div",{className:"ind-chase-dot"})]})})}),F=function(){var e=p({search_term:""},(function(){N()?O("/api/products/get-all-protected","post",s):O("/api/products/get-all","post",s)}),C),t=Object(u.a)(e,5),c=(t[0],t[1]),n=t[2],s=t[3],i=t[4],r=y(),o=Object(u.a)(r,5),j=o[0],b=o[1],m=o[2],O=(o[3],o[4]),h=Object(v.c)(),f=Object(l.f)();return Object(a.useEffect)((function(){b&&0===b.products.length?h(P({open:!0,msg:"No results per this location",classes:"mdl-error"})):b?f.push({pathname:"/search-results",state:b}):m&&h(P({open:!0,msg:m,classes:"mdl-error"}))}),[b,m]),console.log(b),Object(d.jsxs)(d.Fragment,{children:[j&&Object(d.jsx)(A,{}),Object(d.jsxs)("form",{children:[Object(d.jsx)("input",{type:"search",placeholder:"Enter your location",name:"search_term",onChange:n,value:s.search_term}),Object(d.jsx)("div",{className:"form-danger",children:i.search_term&&i.search_term}),Object(d.jsx)("button",{onClick:c,children:"Find"})]})]})},D=function(){return Object(d.jsx)("footer",{children:"All Icons and copyrights"})},L=function(){return Object(d.jsxs)("div",{className:"home",children:[Object(d.jsx)("h1",{children:"Welcome to instaHarvest"}),Object(d.jsx)(F,{}),Object(d.jsx)(j,{})]})},R=function(e){var t=e.children,c=e.parent,n=Object(a.useMemo)((function(){return document.createElement("div")}),[]);return Object(a.useEffect)((function(){var e=c&&c.appendChild?c:document.body;return e.appendChild(n),function(){e.removeChild(n)}}),[n,c]),r.a.createPortal(t,n)},z=c(9),H=c.n(z),V=(c(115),c(25)),U=function(e,t){switch(t.type){case"setActive":return Object(m.a)(Object(m.a)({},e),{},{active:t.active});case"setChildren":return Object(m.a)(Object(m.a)({},e),{},{children:t.children,classes:t.classes});case"setOpen":return Object(m.a)(Object(m.a)({},e),{},{isOpen:t.isOpen});case"setModal":return Object(m.a)(Object(m.a)({},e),{},{modal:t.modal})}},B=function(e){var t=e.withBackdrop,c=e.useTimer,n=e.timeOut,s=e.inPlace,i=e.disableClose,r=Object(a.useReducer)(U,{active:!1,isOpen:!1,children:null,classes:null,modal:null}),o=Object(u.a)(r,2),l=o[0],j=o[1],b=Object(a.useRef)(null),m=Object(v.c)(),p=function(){j({type:"setOpen",isOpen:!1})};return Object(a.useEffect)((function(){if(!0===t){var e=b.current,c=function(){return j({type:"setActive",active:l.isOpen})},n=function(e){return[27].indexOf(e.which)>=0&&p()},a=function(t){return t.target===e&&p()};return e&&(e.addEventListener("transitionend",c),i||(e.addEventListener("click",a),window.addEventListener("keyup",n))),function(){e&&(e.removeEventListener("transitionend",c),i||e.removeEventListener("click",a)),i||window.removeEventListener("keyup",n)}}}),[l.isOpen,l.modal]),Object(a.useEffect)((function(){!l.isOpen||t||s?l.isOpen&&window.setTimeout((function(){document.activeElement.blur(),j({type:"setActive",active:l.isOpen})}),10):m(P({open:!0,msg:l.children,classes:l.classes}))}),[l.isOpen]),Object(a.useEffect)((function(){var e;return l.isOpen&&c&&(e=setTimeout((function(){p()}),n||5e3)),function(){c&&clearTimeout(e)}}),[l.isOpen]),Object(a.useEffect)((function(){t?j({type:"setModal",modal:Object(d.jsx)("div",{children:(l.isOpen||l.active)&&Object(d.jsx)(R,{children:Object(d.jsx)("div",{ref:b,className:H()("backdrop",{"bd-active":l.active&&l.isOpen}),children:Object(d.jsxs)("div",{className:H()("modal",{"mdl-active":l.active&&l.isOpen}),children:[i&&Object(d.jsx)("div",{className:"mdl-close-button",onClick:p,children:Object(d.jsx)(V.e,{})}),l.children]})})})})}):s?j({type:"setModal",modal:Object(d.jsx)("div",{className:H()("mdl-inpl",l.classes,{"mdl-inpl-active":l.active&&l.isOpen}),children:l.children})}):d.Fragment}),[l.active,l.isOpen,l.children]),[l.modal,function(e,t){j({type:"setOpen",isOpen:!0}),j({type:"setChildren",children:e,classes:t})},p,l.isOpen]},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600,t=Object(a.useState)(window.innerWidth),c=Object(u.a)(t,2),n=c[0],s=c[1],i=Object(a.useState)(window.innerWidth>=e),r=Object(u.a)(i,2),o=r[0],l=r[1];return Object(a.useEffect)((function(){var e=function(){s(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(a.useEffect)((function(){o&&n<e?l(!1):!o&&n>=e&&l(!0)}),[n]),o},Y=(c(116),function(e){var t=e.title,c=e.closeModal,n=e.uploadFileAPI,s=e.imageUrlAPI,i=e.deleteImageAPI,r=Object(a.useState)(null),o=Object(u.a)(r,2),l=o[0],j=o[1],b=Object(a.useState)(),m=Object(u.a)(b,2),O=m[0],h=m[1],f=y(),x=Object(u.a)(f,5),g=x[0],v=x[1],_=x[2],N=(x[3],x[4]),w=B({withBackdrop:!1,useTimer:!0,inPlace:!0}),k=Object(u.a)(w,2),S=k[0],E=k[1],P=p({url:""},(function(){N(s,"POST",F)}),C),I=Object(u.a)(P,5),M=I[1],T=I[2],F=I[3],D=I[4],L=function(){j(null)};return Object(a.useEffect)((function(){v&&v.message?(E(v.message,"mdl-ok"),L()):_&&E(_,"mdl-error")}),[v,_]),Object(d.jsxs)("div",{className:"upload-image",children:[g&&Object(d.jsx)(A,{}),t&&Object(d.jsx)("h3",{children:t}),Object(d.jsx)("a",{onClick:function(){j("url")},children:"Save image url"}),Object(d.jsx)("a",{onClick:function(){j("upload")},children:"Upload photo"}),Object(d.jsx)("a",{onClick:function(){j("delete")},children:"Delete photo"}),"upload"===l&&Object(d.jsxs)("form",{encType:"multipart/form-data",children:[Object(d.jsx)("input",{type:"file",name:"image_url",accept:"image/*",onChange:function(e){e&&e.preventDefault(),h(e.target.files[0])}}),Object(d.jsx)("button",{onClick:function(e){if(e&&e.preventDefault(),"upload"===l)if(O.size>1e6)E("Image size should be less then 1mb","mdl-error");else{var t=new FormData;t.append("file",O),N(n,"POST",t)}},children:"Submit"}),Object(d.jsx)("button",{onClick:L,children:"Cancel"})]}),"url"===l&&Object(d.jsxs)("form",{children:[Object(d.jsx)("input",{placeholder:"Enter image url",type:"text",name:"url",onChange:T,value:F.url||""}),Object(d.jsx)("div",{className:"form-danger",children:D.url&&D.url}),Object(d.jsx)("button",{onClick:M,children:"Submit"}),Object(d.jsx)("button",{onClick:L,children:"Cancel"})]}),"delete"===l&&Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"Delete image? Are you sure?"}),Object(d.jsx)("button",{onClick:L,children:"No"}),Object(d.jsx)("button",{onClick:function(){j("delete-confirmed"),N(i,"POST",{})},children:"Yes"})]}),"delete-confirmed"===l&&Object(d.jsx)("p",{children:"Image is deleting..."}),v&&Object(d.jsx)("button",{onClick:function(){c(),window.location.reload()},children:"Close"}),S]})}),J=(n="app_data")&&JSON.parse(localStorage.getItem(n)),Z=Object(k.b)({name:"profile",initialState:{username:null,first_name:J?J.first_name:null,last_name:null,email:null,profile_addr:null,zip_code:null,address:null,image_url:J?J.image_url:null,image_back_url:J?J.image_back_url:null,email_verified:J?J.email_verified:null,city:J?J.city:null,us_state:J?J.us_state:null,created_at:J?J.created_at:null},reducers:{updateProfile:function(e,t){var c=t.payload,n=c.username,a=c.first_name,s=c.last_name,i=c.email,r=c.profile_addr,o=c.zip_code,l=c.address,d=c.image_url,j=c.image_back_url,u=c.email_verified,b=c.city,m=c.us_state,p=c.created_at;!function(e,t){localStorage.setItem(e,JSON.stringify(t))}("app_data",{first_name:a,image_url:d,image_back_url:j,email_verified:u,city:b,us_state:m,created_at:p}),e.username=n,e.first_name=a,e.last_name=s,e.email=i,e.profile_addr=r,e.zip_code=o,e.address=l,e.image_url=d,e.image_back_url=j,e.email_verified=u,e.city=b,e.us_state=m,e.created_at=p}}}),$=Z.actions.updateProfile,K=function(e){return{username:e.profile.username,first_name:e.profile.first_name,last_name:e.profile.last_name,email:e.profile.email,profile_addr:e.profile.profile_addr,zip_code:e.profile.zip_code,address:e.profile.address,image_url:e.profile.image_url,image_back_url:e.profile.image_back_url,email_verified:e.profile.email_verified,city:e.profile.city,us_state:e.profile.us_state,created_at:e.profile.created_at}},G=Z.reducer,q=(c(27),function(e){var t=e.edit,c=e.profileImg,n=e.profileBackImg,a=Object(v.d)(K,v.b),s=(Object(l.f)(),B({withBackdrop:!0,useTimer:!1,inPlace:!1})),i=Object(u.a)(s,3),r=i[0],o=i[1],j=i[2];return Object(d.jsxs)(d.Fragment,{children:[r,a&&Object(d.jsxs)("div",{className:"prf-header",children:[Object(d.jsxs)("div",{className:"prf-back-block",children:[Object(d.jsx)("img",{className:"prf-back-img",src:n||a.image_back_url}),t&&Object(d.jsx)("div",{children:Object(d.jsx)("a",{onClick:function(){o(Object(d.jsx)(Y,{title:"Set profile background image",closeModal:j,uploadFileAPI:"/api/account/update_back_image_file",imageUrlAPI:"/api/account/update_back_image_url",deleteImageAPI:"/api/account/delete_back_image"}))},children:"Edit"})})]}),Object(d.jsxs)("div",{className:"prf-img-block",children:[Object(d.jsx)("img",{className:"prf-img",src:c||a.image_url}),t&&Object(d.jsx)("div",{}),t&&Object(d.jsx)("a",{onClick:function(){o(Object(d.jsx)(Y,{title:"Set profile image",closeModal:j,uploadFileAPI:"/api/account/update_profile_image_file",imageUrlAPI:"/api/account/update_profile_image_url",deleteImageAPI:"/api/account/delete_profile_image"}))},children:"Edit"})]})]})]})}),Q=c(74),X=c(73),ee=function(e){var t=e.verified,c=e.children;return Object(d.jsxs)("div",{children:[c,Object(d.jsxs)("span",{className:"tooltip",children:[t?Object(d.jsx)(X.a,{size:"24px",color:"#4e9340"}):Object(d.jsx)(Q.a,{size:"24px"}),Object(d.jsx)("span",{className:"tooltiptext",children:t?"Email verified":"Email not verified"})]})]})},te=c(24),ce=function(e){var t=e.firstName,c=e.emailVerified,n=e.city,a=e.usState,s=e.joined;return Object(d.jsxs)("div",{className:"prf-pbl-top",children:[Object(d.jsx)(ee,{verified:c,children:Object(d.jsx)("h2",{className:"inline-block",children:t})}),Object(d.jsxs)("p",{children:[n,", ",te.find((function(e){return e.name===a})).abbreviation]}),Object(d.jsxs)("p",{children:["Joined: ",s]})]})},ne=(c(59),c(75)),ae=c.n(ne),se=function(e,t){if(!e||0===e.length)return"";var c=new Date("".concat(e,"+00:00")),n=Intl.DateTimeFormat().resolvedOptions().timeZone,a=ae()().tz(n).utcOffset()/60,s=c.getHours();c.setHours(s+a);var i=c.toISOString().replace("T"," ").slice(0,16);if("month-year"===t){var r=c.toDateString().slice(4,7),o=c.toDateString().slice(11);return"".concat(r," ").concat(o)}return"".concat(i)},ie=function(){var e=y(),t=Object(u.a)(e,5),c=t[0],n=t[1],s=t[2],i=t[3],r=t[4],o=Object(v.c)(),j=Object(l.f)();return Object(a.useEffect)((function(){r("/api/chat/get_user_chats","POST",{})}),[]),Object(a.useEffect)((function(){s&&o(P({open:!0,msg:s,classes:"mdl-error"}))}),[n,s,i]),Object(d.jsxs)(d.Fragment,{children:[c&&Object(d.jsx)(A,{}),n&&n.chats.map((function(e,t){return Object(d.jsxs)("div",{className:"chat-user-chats",onClick:function(){return t=e.recipient_id,c=e.recipient_name,n=e.recipient_img,void j.push({pathname:"/chats/".concat(c),state:{recipientId:t,recipientName:c,recipientImg:n}});var t,c,n},children:[Object(d.jsx)("img",{className:"chat-img",src:e.recipient_img}),Object(d.jsxs)("div",{className:"chat-last-msg",children:[Object(d.jsx)("b",{children:e.recipient_name}),Object(d.jsx)("p",{children:Object(d.jsx)("i",{children:e.last_message})}),Object(d.jsx)("p",{children:se(e.last_date)})]})]},t)}))]})},re=function(e){var t=e.product,c=e.onDelete,n=e.user_id,a=Object(l.f)(),s=Object(l.g)().pathname,i={border:"1px solid black",margin:"5px"},r=B({withBackdrop:!0,useTimer:!1,inPlace:!1}),o=Object(u.a)(r,3),j=o[0],b=o[1],m=o[2],p=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{children:"Are you sure to delete?"}),Object(d.jsx)("button",{onClick:function(){return c(t.product_id)},children:"Yes"}),Object(d.jsx)("button",{onClick:function(){return m()},children:"No"})]});return Object(d.jsxs)(d.Fragment,{children:[n===t.user_id||"/user-products"===s?Object(d.jsxs)("div",{style:i,children:[Object(d.jsx)("p",{children:t.name}),Object(d.jsx)("p",{children:t.description}),Object(d.jsxs)("p",{children:["$",t.price]}),Object(d.jsx)("button",{onClick:function(){return function(e){a.push("edit-product",e)}(t)},children:"Edit Product"})]}):Object(d.jsxs)("div",{onClick:function(){return function(e){a.push("/product-info",e)}(t)},style:i,className:"product",children:[Object(d.jsx)("p",{children:t.name}),Object(d.jsx)("p",{children:t.description}),Object(d.jsxs)("p",{children:["$",t.price]})]}),"/search-results"===s?null:Object(d.jsx)("button",{onClick:function(){b(p)},children:"Delete Product"}),j]})},oe=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),c=t[0],n=t[1],s=y(),i=Object(u.a)(s,5),r=i[0],o=i[1],l=(i[2],i[3],i[4]),j=function(){l("/api/products/products-per-user","post",null)};Object(a.useEffect)((function(){j()}),[]),Object(a.useEffect)((function(){o&&"deleted"===o.msg?j():o&&n(o.user_products)}),[o]);var b=function(e){l("/api/products/delete_product","delete",{product_id:e})};return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"All your products are here! "}),r&&Object(d.jsx)(A,{}),c&&c.map((function(e){return Object(d.jsx)("div",{children:Object(d.jsx)(re,{product:e,onDelete:b})},e.product_id)}))]})},le=function(e){var t=e.tab,c=Object(l.f)(),n=Object(a.useState)(t||"products"),s=Object(u.a)(n,2),i=s[0],r=s[1],o=Object(v.d)(K,v.b),j=Object(v.c)(),b=y(),p=Object(u.a)(b,5),O=(p[0],p[1]),h=p[2],f=p[3],x=p[4];return Object(a.useLayoutEffect)((function(){console.log("test-profile"),!1===N()?_().then((function(){c.push("/login")})).catch((function(){})):x("/api/account/get_profile_private","POST",{})}),[]),Object(a.useEffect)((function(){O&&O.msg?j(P({open:!0,msg:O.msg,classes:"mdl-ok"})):O&&j($(Object(m.a)({},O))),h&&j(P({open:!0,msg:h,classes:"mdl-error"}))}),[O,h,f]),Object(d.jsx)(d.Fragment,{children:o&&Object(d.jsxs)("div",{className:"profile",children:[Object(d.jsx)(q,{edit:!1}),Object(d.jsx)(ce,{firstName:o.first_name,emailVerified:o.email_verified,city:o.city,usState:o.us_state,joined:se(o.created_at,"month-year")}),Object(d.jsx)("button",{onClick:function(){c.push("/profile/edit")},children:"Edit profile"}),Object(d.jsxs)("div",{className:"prf-main-menu",children:[Object(d.jsx)("hr",{className:"hr-top"}),Object(d.jsxs)("div",{className:"prf-main-menu-tabs",children:[Object(d.jsx)("div",{onClick:function(){c.push("/profile"),r("products")},className:H()({"prf-main-menu-active":"products"===i}),children:"Products"}),Object(d.jsx)("div",{onClick:function(){c.push("/chats"),r("chats")},className:H()({"prf-main-menu-active":"chats"===i}),children:"Chats"})]}),Object(d.jsx)("hr",{className:"hr-bottom"})]}),Object(d.jsxs)("div",{className:"prf-body",children:["chats"===i&&Object(d.jsx)(ie,{}),"products"===i&&Object(d.jsx)(oe,{})]})]})})},de=c(79),je=function(){var e=Object(a.useState)({latitude:26.0112,longitude:-80.1495,width:"100vw",height:"100vh",zoom:8}),t=Object(u.a)(e,2),c=t[0],n=t[1];return Object(d.jsx)("div",{children:Object(d.jsx)(de.a,Object(m.a)(Object(m.a)({},c),{},{mapboxApiAccessToken:"pk.eyJ1IjoiYXJvbDE1IiwiYSI6ImNrbW14ajVkdzFwamgycHF1eWU3d3k1ZWIifQ.luHFbQNyF1pY-67-V50Vcw",mapStyles:"mapbox://styles/arol15/ckmoaqw8a43jc17qslhph1v2k",onViewportChange:function(e){n(e)},children:"markers here"}))})},ue=function(){var e=Object(l.g)(),t=e.state.products;return Object(d.jsxs)(d.Fragment,{children:[e.state.user_id?t.map((function(t){return Object(d.jsx)("div",{children:Object(d.jsx)(re,{product:t,user_id:e.state.user_id})},t.product_id)})):t.map((function(e){return Object(d.jsx)("div",{children:Object(d.jsx)(re,{product:e})},e.product_id)})),Object(d.jsx)("div",{children:Object(d.jsx)(je,{})})]})},be=function(e){var t=e.view,c=e.inModal,n=e.closeModal,s=e.user,i=e.afterConfirm,r=y(),j=Object(u.a)(r,5),b=j[0],O=j[1],h=j[2],f=j[3],x=j[4],g=Object(l.f)(),_=Object(v.c)(),w=B({withBackdrop:!1,useTimer:!0,inPlace:!!c}),k=Object(u.a)(w,2),S=k[0],E=k[1];N()&&!c&&g.push("/profile");var P=p({},(function(e){x("login"===t||"confirm"===t?"/api/auth/login":"/api/auth/signup","post",D)}),C),I=Object(u.a)(P,5),M=I[0],T=I[1],F=I[2],D=I[3],L=I[4];return Object(a.useEffect)((function(){"login"===t?M({login:"",password:""}):"signup"===t?M({email:"",password:"",confirm_pass:"",username:"",first_name:"",state:"",city:""}):"confirm"===t&&M({login:s,password:""})}),[t]),Object(a.useEffect)((function(){O&&(localStorage.setItem("status","loggedIn"),_($(Object(m.a)({},O))),i&&n?(n(),i()):i?i():n||g.push("/profile"))}),[O]),Object(a.useEffect)((function(){h?E(h,"mdl-error"):O&&O.msg&&E(O.msg,"mdl-ok")}),[h,f,O]),Object(d.jsxs)("div",{children:[S,b&&Object(d.jsx)(A,{}),"login"===t&&Object(d.jsx)("h1",{children:"Log In"}),"signup"===t&&Object(d.jsx)("h1",{children:"Sign Up"}),"confirm"===t&&Object(d.jsx)("h1",{children:"Confirm identity"}),Object(d.jsxs)("form",{onSubmit:T,children:[Object(d.jsxs)("div",{className:"auth-inputs",children:["login"===t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"text",placeholder:"Email/Username",name:"login",onChange:F,value:D.login||""},"1"),Object(d.jsx)("div",{className:"form-danger",children:L.login&&L.login})]}),"signup"===t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"text",placeholder:"Username",name:"username",onChange:F,value:D.username||""}),Object(d.jsx)("div",{className:"form-danger",children:L.username&&L.username})]}),"signup"===t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"text",placeholder:"Email",name:"email",onChange:F,value:D.email||""}),Object(d.jsx)("div",{className:"form-danger",children:L.email&&L.email})]}),"confirm"===t&&Object(d.jsx)("p",{children:D.login}),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"password",placeholder:"Password",name:"password",onChange:F,value:D.password||""},"4"),Object(d.jsx)("div",{className:"form-danger",children:L.password&&L.password})]}),"signup"===t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"password",placeholder:"Confirm password",name:"confirm_pass",onChange:F,value:D.confirm_pass||""},"15"),Object(d.jsx)("div",{className:"form-danger",children:L.confirm_pass&&L.confirm_pass}),Object(d.jsx)("input",{type:"text",placeholder:"First Name",name:"first_name",onChange:F,value:D.first_name||""},"5"),Object(d.jsx)("div",{className:"form-danger",children:L.first_name&&L.first_name}),Object(d.jsxs)("select",{placeholder:"State",name:"state",onChange:F,value:D.state||"",children:[Object(d.jsx)("option",{value:"",children:"Select state"},"-"),te.map((function(e){return Object(d.jsx)("option",{value:te.name,children:e.name},e.abbreviation)}))]},"6"),Object(d.jsx)("div",{className:"form-danger",children:L.state&&L.state}),Object(d.jsx)("input",{type:"text",placeholder:"City",name:"city",onChange:F,value:D.city||""},"7"),Object(d.jsx)("div",{className:"form-danger",children:L.city&&L.city})]})]}),Object(d.jsx)("input",{type:"submit",disabled:b},"8")]}),c?null:"login"===t?Object(d.jsx)(o.b,{to:"/signup",children:"Sign Up"}):Object(d.jsx)(o.b,{to:"/login",children:"Login"}),Object(d.jsx)("p",{}),"login"===t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(o.b,{onClick:n,to:"/reset_password",children:"Forgot your password?"}),Object(d.jsx)("p",{})]})]})},me=function(){return Object(d.jsx)("h1",{children:"Page Not Found"})},pe=function(e){var t=y(),c=Object(u.a)(t,5),n=c[0],s=c[1],i=c[2],r=(c[3],c[4]);return Object(a.useEffect)((function(){r("/api/account/".concat(e.match.params.addr),"GET",{})}),[]),Object(d.jsxs)(d.Fragment,{children:[n&&Object(d.jsx)(A,{}),i&&Object(d.jsx)("h1",{children:"Profile Not Found"}),s&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(q,{edit:!1,profileImg:s.image_url,profileBackImg:s.image_back_url}),Object(d.jsx)(ce,{firstName:s.first_name,emailVerified:s.email_verified,city:s.city,usState:s.us_state,joined:se(s.created_at,"month-year")})]})]})},Oe=function(e){var t=Object(l.f)(),c=y(),n=Object(u.a)(c,5),s=n[0],i=n[1],r=n[2],o=n[3],j=n[4],b=Object(v.c)(),m=p(e.reset?{email:""}:{password:"",confirm_pass:""},(function(){e.reset?j("/api/auth/reset_password","POST",{email:x.email}):j("/api/auth/reset_password_confirm","POST",{password:x.password,token:e.match.params.token})}),C),O=Object(u.a)(m,5),h=O[1],f=O[2],x=O[3],g=O[4];return Object(a.useEffect)((function(){r?b(P({open:!0,msg:r,classes:"mdl-error"})):i&&i.msg&&(b(P({open:!0,msg:i.msg,classes:"mdl-ok"})),e.reset,t.push("/login"))}),[r,o,i]),Object(d.jsxs)(d.Fragment,{children:[s&&Object(d.jsx)(A,{}),Object(d.jsx)("h1",{children:"Reset Password"}),e.reset?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{children:"Enter your email address below"}),Object(d.jsxs)("form",{onSubmit:h,children:[Object(d.jsx)("label",{children:"Email: "}),Object(d.jsx)("input",{type:"text",placeholder:"Email",name:"email",onChange:f,value:x.email||""},"9"),Object(d.jsx)("div",{className:"form-danger",children:g.email&&g.email}),Object(d.jsx)("input",{type:"submit",disabled:s},"8")]})]}):Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("form",{onSubmit:h,children:[Object(d.jsx)("label",{children:"New password: "}),Object(d.jsx)("input",{type:"password",placeholder:"Password",name:"password",onChange:f,value:x.password||""},"4"),Object(d.jsx)("div",{className:"form-danger",children:g.password&&g.password}),Object(d.jsx)("label",{children:"Confirm password: "}),Object(d.jsx)("input",{type:"password",placeholder:"Confirm password",name:"confirm_pass",onChange:f,value:x.confirm_pass||""},"15"),Object(d.jsx)("div",{className:"form-danger",children:g.confirm_pass&&g.confirm_pass}),Object(d.jsx)("input",{type:"submit",disabled:s},"87")]})})]})},he=function(){var e=Object(v.d)(M,v.b),t=e.open,c=e.msg,n=e.timeOut,s=e.classes,i=Object(v.c)(),r=Object(a.useState)(!1),o=Object(u.a)(r,2),l=o[0],j=o[1];return Object(a.useEffect)((function(){t&&window.setTimeout((function(){document.activeElement.blur(),j(t)}),10)}),[t]),Object(a.useEffect)((function(){var e;return t&&(e=setTimeout((function(){i(I())}),n||7e3)),function(){clearTimeout(e)}}),[t]),Object(a.useEffect)((function(){var e;return t&&(e=setTimeout((function(){j(!1)}),n?n-1e3:6e3)),function(){clearTimeout(e)}}),[l]),Object(d.jsx)(d.Fragment,{children:(t||l)&&Object(d.jsx)(R,{children:Object(d.jsx)("div",{className:H()("mdl-msg",s,{"mdl-msg-active":l}),children:c})})})},fe=c(80),xe=c(78),ge=(c(137),function(e){var t=e.children,c=e.open,n=e.button,s=e.onClick,i=e.classContainer,r=e.classMenu,o=e.classActive,l=Object(a.useState)({clContainer:i||"menu-container",clMenu:r||"menu",clActive:o||"menu-active"}),j=Object(u.a)(l,1)[0],m=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=function(e){null===m.current||m.current.contains(e.target)||s()};if(c)return window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}),[c]),Object(d.jsxs)("div",{className:j.clContainer,children:[n,Object(d.jsx)("nav",{ref:m,className:H()(j.clMenu,Object(b.a)({},j.clActive,c)),children:Object(d.jsx)("div",{className:"menu-elements",children:t})})]})}),ve=function(e){var t=e.msgId,c=e.onDeleteMsg,n=e.body,s=e.createdAt,i=e.sender,r=e.image,o=n.split("\n").map((function(e,t){return Object(d.jsx)("p",{children:e},t)})),l=Object(a.useState)(!1),j=Object(u.a)(l,2),b=j[0],m=j[1],p=function(){m(!b)};return Object(d.jsxs)("div",{className:H()("msg-container","Me"===i?"msg-cnt-self":"msg-cnt-reciv"),children:["Me"!==i&&Object(d.jsx)("img",{className:"chat-img",src:r}),Object(d.jsxs)("div",{className:H()("msg-body","Me"===i?"msg-body-self":"msg-body-reciv"),children:[o,Object(d.jsx)("p",{children:s})]}),"Me"===i&&Object(d.jsx)(ge,{open:b,button:Object(d.jsx)("button",{className:"msg-menu-button",onClick:p,children:Object(d.jsx)(xe.a,{})}),onClick:p,children:Object(d.jsx)("a",{onClick:function(){c(t),m(!b)},children:"Delete"})})]})},_e=Object(a.memo)(ve),Ne=c(48),we=function(){var e=y(),t=Object(u.a)(e,5),c=t[0],n=t[1],s=t[2],i=t[3],r=t[4],o=y(),j=Object(u.a)(o,5),b=(j[0],j[1]),O=j[2],h=j[3],f=j[4],x=Object(a.useState)(null),g=Object(u.a)(x,2),_=g[0],N=g[1],w=Object(a.useRef)(),k=Object(l.g)(),S=Object(a.useState)(k.state?Object(m.a)({},k.state):null),E=Object(u.a)(S,2),I=E[0],M=(E[1],Object(l.f)()),T=Object(v.c)(),F=p({body:"",recipient_id:I&&I.recipientId},(function(e){f("/api/chat/send_message","POST",H,!0)}),C),D=Object(u.a)(F,5),L=D[0],R=D[1],z=D[2],H=D[3],V=D[4],U=function(e){f("/api/chat/delete_message","DELETE",{msg_id:e},!0)};Object(a.useEffect)((function(){I||M.push("/chats"),r("/api/chat/get_chat_between_users","POST",{recipient_id:I&&I.recipientId})}),[]);var B=function(e){e&&e.preventDefault(),r("/api/chat/get_chat_messages","POST",{chat_id:n.chat_id})};return Object(a.useEffect)((function(){s?T(P({open:!0,msg:s,classes:"mdl-error"})):n&&(L(Object(m.a)(Object(m.a)({},H),{},{chat_id:n.chat_id})),N(Object(fe.a)(n.msgs)))}),[s,i,n]),Object(a.useEffect)((function(){O?T(P({open:!0,msg:O,classes:"mdl-error"})):b&&(B(),L(Object(m.a)(Object(m.a)({},H),{},{body:""})))}),[b,O,h]),Object(a.useEffect)((function(){w.current&&w.current.scrollIntoView()}),[_]),I&&Object(d.jsxs)("div",{className:"chat",children:[c&&Object(d.jsx)(A,{}),Object(d.jsxs)("div",{className:"chat-header",children:[Object(d.jsxs)("h1",{children:["Chat with ",I&&I.recipientName]}),Object(d.jsx)("button",{onClick:function(){M.goBack()},className:"chat-back-button",children:Object(d.jsx)(Ne.a,{})})]}),Object(d.jsx)("div",{className:"chat-scroll",children:_&&_.map((function(e,t){var c=parseInt(e.sender_id)===parseInt(I&&I.recipientId)?I&&I.recipientName:"Me";return Object(d.jsx)("div",{ref:t===_.length-1?w:null,children:Object(d.jsx)(_e,{msgId:e.msg_id,onDeleteMsg:U,createdAt:se(e.created_at),sender:c,body:e.body,image:e.sender_img})},t)}))}),_&&Object(d.jsx)("div",{className:"chat-footer",children:Object(d.jsxs)("form",{children:[Object(d.jsx)("textarea",{rows:3,type:"text",name:"body",onChange:z,value:H.body||""}),Object(d.jsx)("div",{className:"form-danger",children:V.body&&V.body}),Object(d.jsx)("button",{onClick:R,children:"Send"}),Object(d.jsx)("button",{onClick:B,children:Object(d.jsx)(Ne.b,{})})]})})]})},ye=(c(138),c(139),c(145)),Ce=c(146),ke=function(e){var t=e.closeModal,c=e.afterConfirm,n=Object(a.useState)("login"),s=Object(u.a)(n,2),i=s[0],r=s[1],o=function(){r("login"===i?"signup":"login")};return Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{disabled:"login"===i,className:H()("authButton",{active:"login"===i}),onClick:o,children:"Log In"}),Object(d.jsx)("button",{disabled:"signup"===i,className:H()("authButton",{active:"signup"===i}),onClick:o,children:"Sign Up"}),Object(d.jsx)(ye.a,{children:Object(d.jsx)(Ce.a,{addEndListener:function(e,t){return e.addEventListener("transitionend",t,!1)},classNames:"fade",children:Object(d.jsx)(be,{view:i,inModal:!0,closeModal:t,afterConfirm:c})},i)})]})},Se=(c(140),function(e){var t=e.name,c=e.handleInputChange,n=e.inputValue,s=e.formData,i=e.setFormData,r=Object(a.useState)(!0),o=Object(u.a)(r,2),l=o[0],j=o[1];return Object(d.jsxs)("div",{className:"switch",children:[Object(d.jsx)("span",{className:H()("switch-click",{"switch-click-left":l}),onClick:function(){l?j(!1):(i(Object(m.a)(Object(m.a)({},s),{},Object(b.a)({},t,0))),j(!0))}}),Object(d.jsx)("span",{className:H()("switch-text",{"switch-text-right":!l}),children:"Free"}),Object(d.jsx)("span",{className:H()("slider",{"slider-right":!l})}),Object(d.jsx)("input",{className:H()("switch-input",{"switch-input-hide":l}),type:"number",name:t,placeholder:"$",onChange:c,value:n}),Object(d.jsx)("span",{className:H()("input-label",{"input-label-hide":l}),children:"Enter price"})]})}),Ee=function(){var e=Object(l.f)(),t=y(),c=Object(u.a)(t,5),n=c[0],s=c[1],i=c[2],r=c[3],o=c[4],j=Object(v.c)(),b=B({withBackdrop:!0,useTimer:!1,inPlace:!1,disableClose:!0}),m=Object(u.a)(b,3),O=m[0],h=m[1],f=m[2],x=p({name:"",product_type:"",image_urls:[],price:0,status:"",description:""},(function(){o("/api/products/add-product","post",S)}),C),g=Object(u.a)(x,5),_=g[0],w=g[1],k=g[2],S=g[3],E=g[4],I=function(){f(),window.location.reload()};return Object(a.useEffect)((function(){N()||h(Object(d.jsx)(ke,{afterConfirm:I}))}),[]),Object(a.useEffect)((function(){i?j(P({open:!0,msg:i,classes:"mdl-error"})):s&&(j(P({open:!0,msg:"Product has been added!",classes:"mdl-ok"})),e.push("/user-products"))}),[s,i,r]),Object(d.jsxs)(d.Fragment,{children:[n&&Object(d.jsx)(A,{}),Object(d.jsxs)("div",{className:"add-product",children:[Object(d.jsx)("h2",{children:"Share Your Product"}),Object(d.jsxs)("form",{onSubmit:w,children:[Object(d.jsx)("label",{children:"Name of your product"}),Object(d.jsx)("input",{className:"add-product-input",placeholder:"Name",type:"text",name:"name",onChange:k,value:S.name||""}),Object(d.jsx)("div",{className:"form-danger",children:E.name&&E.name}),Object(d.jsx)("label",{children:"Product Type:"}),Object(d.jsxs)("select",{name:"product_type",onChange:k,value:S.product_type||"",children:[Object(d.jsx)("option",{children:"Select Product Type"}),Object(d.jsx)("option",{children:"Fruit"}),Object(d.jsx)("option",{children:"Vegetable"}),Object(d.jsx)("option",{children:"Herb"}),Object(d.jsx)("option",{children:"Other"})]}),Object(d.jsx)("div",{className:"form-danger",children:E.product_type&&E.product_type}),Object(d.jsx)("label",{children:"Pictures"}),Object(d.jsx)("input",{className:"add-product-input",type:"file",name:"image_urls",onChange:k,value:S.image_urls||""}),Object(d.jsx)("label",{children:"Price: "}),Object(d.jsx)(Se,{name:"price",handleInputChange:k,inputValue:S.price||"",setFormData:_,formData:S}),Object(d.jsx)("label",{children:"Description: "}),Object(d.jsx)("textarea",{rows:3,placeholder:"Describe your product",type:"textarea",name:"description",onChange:k,value:S.description||""}),Object(d.jsx)("div",{className:"form-danger",children:E.description&&E.description}),Object(d.jsx)("button",{children:"Add Product"})]})]}),O]})},Pe=function(){var e=Object(l.f)(),t=Object(l.g)(),c=t.state.user_id,n=y(),s=Object(u.a)(n,5),i=s[0],r=s[1],o=(s[2],s[3],s[4]),j=Object(a.useState)({}),b=Object(u.a)(j,2),m=b[0],p=b[1],O=B({withBackdrop:!0,useTimer:!1,inPlace:!1}),h=Object(u.a)(O,3),f=h[0],x=h[1],g=(h[2],function(t,c,n){e.push({pathname:"/chats/".concat(c),state:{recipientId:t,recipientName:c,recipientImg:n}})}),v=function(){g(t.state.user_id,m.first_name,m.image_url),window.location.reload()};return Object(a.useEffect)((function(){o("/api/products/product-location-info/".concat(c),"get")}),[]),Object(a.useEffect)((function(){r&&p(r.product_details)}),[r]),Object(d.jsxs)(d.Fragment,{children:[i&&Object(d.jsx)(A,{}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:["Product: ",t.state.name]}),Object(d.jsxs)("p",{children:["About this product: ",t.state.description]}),Object(d.jsxs)("div",{children:["Location for map: ",m.lat," and ",m.lgt]}),N()?Object(d.jsx)("button",{onClick:function(){return g(t.state.user_id,m.first_name,m.image_url)},children:"Connect with seller"}):Object(d.jsx)("button",{onClick:function(){return x(Object(d.jsx)(ke,{afterConfirm:v}))},children:"Connect with Seller"})]}),f]})},Ie=(c(141),function(){var e=Object(l.f)(),t=Object(v.d)(K,v.b).image_url,c=Object(v.c)(),n=B({withBackdrop:!0,useTimer:!1,inPlace:!1}),s=Object(u.a)(n,3),i=s[0],r=s[1],j=s[2],b=Object(a.useState)(!1),m=Object(u.a)(b,2),p=m[0],O=m[1],h=function(t){t&&_().then((function(){e.push("/")})).catch((function(e){c(P({open:!0,msg:e,classes:"mdl-error"}))})),j(),O(!1)},f=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{children:"Are you sure to logout?"}),Object(d.jsx)("button",{onClick:function(){return h(!0)},children:"Yes"}),Object(d.jsx)("button",{onClick:function(){return h(!1)},children:"No"})]}),x=function(){O(!p)};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("nav",{className:"main-navbar",children:[Object(d.jsx)("div",{className:"main-navbar-logo",children:Object(d.jsx)(o.b,{to:"/",children:"instaHarvest"})}),Object(d.jsx)("div",{children:Object(d.jsx)(o.b,{to:"/add-product",children:"Share your Product"})}),N()?Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(ge,{open:p,button:Object(d.jsx)("div",{children:Object(d.jsx)("img",{className:"main-navbar-profile",src:t,onClick:x,alt:""})}),onClick:x,children:[Object(d.jsx)(o.b,{onClick:x,to:"/profile",children:"Profile"}),Object(d.jsx)("a",{onClick:function(){r(f)},children:"Logout"})]})}):Object(d.jsx)("div",{className:"main-navbar-links",children:Object(d.jsx)("a",{onClick:function(){return r(Object(d.jsx)(ke,{afterConfirm:function(){j(),e.push("/profile")}}))},children:"Sign In"})})]}),i]})}),Me=(c(142),function(){var e=Object(l.g)(),t=Object(l.f)(),c=e.state,n=Object(v.c)(),s=y(),i=Object(u.a)(s,5),r=i[1],o=i[2],j=i[3],b=i[4],m=p({name:c.name,product_type:c.product_type,image_urls:c.urls,price:c.price,status:c.status,description:c.description},(function(){b("/api/products/edit-product/".concat(c.product_id),"patch",x)}),C),O=Object(u.a)(m,5),h=(O[0],O[1]),f=O[2],x=O[3];O[4];return Object(a.useEffect)((function(){o?n(P({open:!0,msg:o,classes:"mdl-error"})):r&&(n(P({open:!0,msg:"Product has been added!",classes:"mdl-ok"})),t.push("/user-products"))}),[r,o,j]),Object(d.jsxs)("div",{className:"edit-product",children:[Object(d.jsx)("h2",{children:"Edit Your Product"}),Object(d.jsxs)("form",{onSubmit:h,children:[Object(d.jsx)("label",{children:"Name of your product"}),Object(d.jsx)("input",{placeholder:"Name",type:"text",name:"name",onChange:f,value:x.name}),Object(d.jsx)("label",{children:"Product Type:"}),Object(d.jsxs)("select",{name:"product_type",onChange:f,value:x.product_type,children:[Object(d.jsx)("option",{children:"Select Product Type"}),Object(d.jsx)("option",{children:"Fruit"}),Object(d.jsx)("option",{children:"Vegetable"}),Object(d.jsx)("option",{children:"Herb"}),Object(d.jsx)("option",{children:"Other"})]}),Object(d.jsx)("label",{children:"Pictures"}),Object(d.jsx)("input",{type:"file",name:"image_urls",onChange:f,value:x.image_urls}),Object(d.jsx)("label",{children:"Price: "}),Object(d.jsx)("input",{placeholder:"$0.00",type:"number",name:"price",onChange:f,value:x.price}),Object(d.jsx)("label",{children:"Description: "}),Object(d.jsx)("textarea",{placeholder:"Describe your product",type:"textarea",name:"description",onChange:f,value:x.description}),Object(d.jsx)("button",{children:"Save Changes"}),Object(d.jsx)("button",{onClick:function(){t.push("/user-products")},children:"Cancel"})]})]})}),Te=function(e){var t=Object(a.useState)(!1),c=Object(u.a)(t,2),n=c[0],s=c[1],i=y(),r=Object(u.a)(i,5),o=r[0],l=r[1],j=r[2],m=r[3],O=r[4],h=B({withBackdrop:!0,useTimer:!1,inPlace:!1}),f=Object(u.a)(h,3),x=f[0],g=f[1],v=f[2],_=p(Object(b.a)({},e.name,e.value),(function(){O("/api/account".concat(e.api),e.method,E)}),C),N=Object(u.a)(_,5),w=N[0],k=N[1],S=N[2],E=N[3],P=N[4];return Object(a.useEffect)((function(){j&&403!==m?e.sendMsg(j,"mdl-error"):l&&l.msg&&(e.sendMsg(l.msg,"mdl-ok"),e.update(),s(!1))}),[l,j]),Object(a.useEffect)((function(){403===m&&g(Object(d.jsx)(be,{view:"confirm",inModal:!0,closeModal:v,afterConfirm:k,user:e.user}))}),[m]),Object(d.jsxs)(d.Fragment,{children:[x,o&&Object(d.jsx)(A,{}),Object(d.jsxs)("b",{children:[e.title,":"]}),n?Object(d.jsx)("div",{children:Object(d.jsxs)("form",{onSubmit:k,children:["us_state"===e.name&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("select",{placeholder:"State",name:"us_state",onChange:S,value:E.us_state||"",children:[Object(d.jsx)("option",{value:"",children:"Select state"},"-"),te.map((function(e){return Object(d.jsx)("option",{value:te.name,children:e.name},e.abbreviation)}))]},"6"),Object(d.jsx)("div",{className:"form-danger",children:P.us_state&&P.us_state})]}),"password"===e.name&&Object(d.jsxs)("div",{className:"prf-change-pass",children:[Object(d.jsx)("input",{placeholder:"New password",type:"password",name:e.name,onChange:S,value:E[e.name]||""}),Object(d.jsx)("p",{}),Object(d.jsx)("input",{placeholder:"Confirm new password",type:"password",name:"confirm_pass",onChange:S,value:E.confirm_pass||""}),Object(d.jsx)("div",{className:"form-danger",children:P.confirm_pass&&P.confirm_pass})]}),"us_state"!==e.name&&"password"!==e.name&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{placeholder:"",type:"text",name:e.name,onChange:S,value:E[e.name]||""}),Object(d.jsx)("div",{className:"form-danger",children:P[e.name]&&P[e.name]})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"submit",disabled:o}),Object(d.jsx)("button",{onClick:function(){s(!1),w(Object(b.a)({},e.name,e.value))},children:"Cancel"})]})]})}):Object(d.jsxs)(d.Fragment,{children:["password"===e.name?Object(d.jsx)("p",{}):e.value?e.children:Object(d.jsx)("p",{children:"Empty"}),Object(d.jsx)("a",{onClick:function(){s(!0)},children:"password"===e.name?"Change password":"Edit"})]}),Object(d.jsx)("br",{})]})},Ae=function(e){var t=e.currTab,c=Object(l.f)(),n=Object(a.useState)(!1),s=Object(u.a)(n,2),i=s[0],r=s[1],o=W(1300),j=function(){o||r(!1)};return Object(a.useEffect)((function(){r(o)}),[o]),Object(d.jsxs)("div",{className:H()("prf-side-menu",{"prf-side-menu-closed":!i}),children:[Object(d.jsxs)("div",{className:"prf-side-content",children:[Object(d.jsx)("div",{onClick:function(){r(!i)},className:"prf-side-hamb",children:i?Object(d.jsx)(V.e,{}):Object(d.jsx)(V.b,{})}),Object(d.jsxs)("p",{className:H()({"prf-side-active":!t}),onClick:function(){t&&c.push("/profile/edit"),j()},children:[Object(d.jsx)("span",{children:Object(d.jsx)(V.d,{})}),Object(d.jsx)("span",{className:H()("prf-side-title",{"prf-side-title-closed":!i}),children:"Public information"})]}),Object(d.jsxs)("p",{className:H()({"prf-side-active":"private"===t}),onClick:function(){"private"!==t&&c.push("/profile/edit/private"),j()},children:[Object(d.jsx)("span",{children:Object(d.jsx)(V.c,{})}),Object(d.jsx)("span",{className:H()("prf-side-title",{"prf-side-title-closed":!i}),children:"Private information"})]}),Object(d.jsxs)("p",{className:H()({"prf-side-active":"address"===t}),onClick:function(){"address"!==t&&c.push("/profile/edit/address"),j()},children:[Object(d.jsx)("span",{children:Object(d.jsx)(V.a,{})}),Object(d.jsx)("span",{className:H()("prf-side-title",{"prf-side-title-closed":!i}),children:"Address"})]})]}),Object(d.jsxs)("div",{className:"prf-side-back",children:[Object(d.jsx)("div",{className:H()("prf-back-left",{"prf-back-left-closed":!i})}),Object(d.jsx)("div",{className:H()("prf-back-right",{"prf-back-right-closed":!i})})]})]})},Fe={baseUrl:"http://www.instaharvest.net/"},De=function(e){var t=e.tab,c=Object(v.d)(K,v.b),n=Object(v.c)(),s=Object(a.useState)(t),i=Object(u.a)(s,2),r=i[0],j=i[1],b=y(),p=Object(u.a)(b,5),O=p[0],h=p[1],f=p[2],x=p[3],g=p[4],_=y(),N=Object(u.a)(_,5),w=N[1],C=N[2],k=N[3],S=N[4],E=Object(l.f)(),I=function(){g("/api/account/get_profile_private","POST",{})};Object(a.useEffect)((function(){c.email||I()}),[]),Object(a.useEffect)((function(){j(t)}),[t]),Object(a.useEffect)((function(){h&&h.msg?n(P({open:!0,msg:h.msg,classes:"mdl-ok"})):h&&n($(Object(m.a)({},h))),f&&n(P({open:!0,msg:f,classes:"mdl-error"}))}),[h,f,x]),Object(a.useEffect)((function(){C?n(P({open:!0,msg:C,classes:"mdl-error"})):w&&w.msg&&n(P({open:!0,msg:w.msg,classes:"mdl-ok"}))}),[w,C,k]);var M=function(e,t){n(P({open:!0,msg:e,classes:t}))};return Object(d.jsxs)(d.Fragment,{children:[O&&Object(d.jsx)(A,{}),Object(d.jsx)(q,{edit:!0}),Object(d.jsx)("button",{className:"prf-return-button",onClick:function(){E.push("/profile")},children:"Return to profile"}),c&&Object(d.jsxs)("div",{className:"prf-edit",children:[Object(d.jsx)(Ae,{currTab:r}),Object(d.jsx)("div",{className:"prf-col"}),!r&&Object(d.jsxs)("div",{className:"prf-block",children:[Object(d.jsx)("h2",{children:"Public Information"}),Object(d.jsx)("p",{}),Object(d.jsxs)("div",{className:"prf-field",children:[Object(d.jsx)(Te,{name:"first_name",title:"First name",api:"/edit_profile",method:"PATCH",update:I,sendMsg:M,value:c.first_name,children:Object(d.jsx)("p",{children:c.first_name})}),Object(d.jsx)("hr",{})]}),Object(d.jsxs)("div",{className:"prf-field",children:[Object(d.jsx)(Te,{name:"profile_addr",title:"Profile address",api:"/edit_profile_address",method:"PATCH",update:I,sendMsg:M,value:c.profile_addr,children:Object(d.jsx)("p",{children:Object(d.jsxs)(o.b,{to:"/profile/".concat(c.profile_addr),children:[Fe.baseUrl,c.profile_addr]})})}),Object(d.jsx)("hr",{})]})]}),"private"===r&&Object(d.jsx)("div",{className:"prf-block",children:Object(d.jsxs)("div",{className:"",children:[Object(d.jsx)("h2",{children:"Private information"}),Object(d.jsxs)("div",{className:"prf-field",children:[Object(d.jsxs)(Te,{name:"new_email",title:"Email",api:"/request_change_email",method:"POST",update:I,sendMsg:M,user:c.email,value:c.email,children:[Object(d.jsx)("div",{children:Object(d.jsx)(ee,{verified:c.email_verified,children:Object(d.jsx)("p",{className:"inline-block",children:c.email})})}),Object(d.jsx)("p",{})]}),!c.email_verified&&Object(d.jsx)("div",{children:Object(d.jsx)("a",{onClick:function(){S("/api/auth/resend_email","POST",{},!0)},children:"Resend confirmation email"})}),Object(d.jsx)("hr",{})]}),Object(d.jsxs)("div",{className:"prf-field",children:[Object(d.jsx)(Te,{name:"username",title:"Username",api:"/edit_username",method:"PATCH",update:I,sendMsg:M,user:c.email,value:c.username,children:Object(d.jsx)("p",{children:c.username})}),Object(d.jsx)("hr",{})]}),Object(d.jsxs)("div",{className:"prf-field",children:[Object(d.jsx)(Te,{name:"last_name",title:"Last name",api:"/edit_profile",method:"PATCH",update:I,sendMsg:M,value:c.last_name,children:Object(d.jsx)("p",{children:c.last_name})}),Object(d.jsx)("hr",{})]}),Object(d.jsxs)("div",{className:"prf-field",children:[Object(d.jsx)(Te,{name:"password",user:c.email,title:"Change password",api:"/change_pass",method:"PATCH",update:I,sendMsg:M,value:c.password,children:Object(d.jsx)("p",{children:c.password})}),Object(d.jsx)("hr",{})]})]})}),"address"===r&&Object(d.jsxs)("div",{className:"prf-block",children:[Object(d.jsx)("h2",{children:"Address"}),Object(d.jsxs)("div",{className:"prf-field",children:[Object(d.jsx)(Te,{name:"address",title:"Address",api:"/edit_profile",method:"PATCH",update:I,sendMsg:M,value:c.address,children:Object(d.jsx)("p",{children:c.address})}),Object(d.jsx)("hr",{})]}),Object(d.jsxs)("div",{className:"prf-field",children:[Object(d.jsx)(Te,{name:"city",title:"City",api:"/edit_profile",method:"PATCH",update:I,sendMsg:M,value:c.city,children:Object(d.jsx)("p",{children:c.city})}),Object(d.jsx)("hr",{})]}),Object(d.jsxs)("div",{className:"prf-field",children:[Object(d.jsx)(Te,{name:"us_state",title:"State",api:"/edit_profile",method:"PATCH",update:I,sendMsg:M,value:c.us_state,children:Object(d.jsx)("p",{children:c.us_state})}),Object(d.jsx)("hr",{})]}),Object(d.jsxs)("div",{className:"prf-field",children:[Object(d.jsx)(Te,{name:"zip_code",title:"Zip code",api:"/edit_profile",method:"PATCH",update:I,sendMsg:M,value:c.zip_code,children:Object(d.jsx)("p",{children:c.zip_code})}),Object(d.jsx)("hr",{})]})]}),Object(d.jsx)("div",{className:"prf-col"})]})]})};var Le=function(){return console.log("test-app"),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(o.a,{children:[Object(d.jsx)(Ie,{}),Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{exact:!0,path:"/",component:L}),Object(d.jsx)(l.a,{path:"/login",children:Object(d.jsx)(be,{view:"login"})}),Object(d.jsx)(l.a,{path:"/signup",children:Object(d.jsx)(be,{view:"signup"})}),Object(d.jsx)(l.a,{path:"/profile",component:le,exact:!0}),Object(d.jsx)(l.a,{path:"/chats",exact:!0,children:Object(d.jsx)(le,{tab:"chats",exact:!0})}),Object(d.jsx)(l.a,{path:"/profile/edit",component:De,exact:!0}),Object(d.jsx)(l.a,{path:"/profile/edit/private",children:Object(d.jsx)(De,{tab:"private"})}),Object(d.jsx)(l.a,{path:"/profile/edit/address",children:Object(d.jsx)(De,{tab:"address"})}),Object(d.jsx)(l.a,{path:"/add-product",component:Ee,exact:!0}),Object(d.jsx)(l.a,{path:"/user-products",component:oe}),Object(d.jsx)(l.a,{path:"/edit-product",component:Me}),Object(d.jsx)(l.a,{path:"/product-info",component:Pe}),Object(d.jsx)(l.a,{path:"/chats/:name",component:we}),Object(d.jsx)(l.a,{path:"/profile/:addr",component:pe}),Object(d.jsx)(l.a,{path:"/search-results",component:ue}),Object(d.jsx)(l.a,{path:"/reset_password",children:Object(d.jsx)(Oe,{reset:!0})}),Object(d.jsx)(l.a,{path:"/reset_password_confirm/:token",component:Oe}),Object(d.jsx)(l.a,{path:"*",component:me})]}),Object(d.jsx)("div",{className:"filler"})]}),Object(d.jsx)(he,{}),Object(d.jsx)(D,{})]})},Re=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,147)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))},ze=Object(k.a)({reducer:{modal:T,profile:G}});r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(v.a,{store:ze,children:Object(d.jsx)(Le,{})})}),document.getElementById("root")),Re()},24:function(e){e.exports=JSON.parse('[{"name":"Alabama","abbreviation":"AL"},{"name":"Alaska","abbreviation":"AK"},{"name":"Arizona","abbreviation":"AZ"},{"name":"Arkansas","abbreviation":"AR"},{"name":"California","abbreviation":"CA"},{"name":"Colorado","abbreviation":"CO"},{"name":"Connecticut","abbreviation":"CT"},{"name":"Delaware","abbreviation":"DE"},{"name":"District Of Columbia","abbreviation":"DC"},{"name":"Florida","abbreviation":"FL"},{"name":"Georgia","abbreviation":"GA"},{"name":"Hawaii","abbreviation":"HI"},{"name":"Idaho","abbreviation":"ID"},{"name":"Illinois","abbreviation":"IL"},{"name":"Indiana","abbreviation":"IN"},{"name":"Iowa","abbreviation":"IA"},{"name":"Kansas","abbreviation":"KS"},{"name":"Kentucky","abbreviation":"KY"},{"name":"Louisiana","abbreviation":"LA"},{"name":"Maine","abbreviation":"ME"},{"name":"Maryland","abbreviation":"MD"},{"name":"Massachusetts","abbreviation":"MA"},{"name":"Michigan","abbreviation":"MI"},{"name":"Minnesota","abbreviation":"MN"},{"name":"Mississippi","abbreviation":"MS"},{"name":"Missouri","abbreviation":"MO"},{"name":"Montana","abbreviation":"MT"},{"name":"Nebraska","abbreviation":"NE"},{"name":"Nevada","abbreviation":"NV"},{"name":"New Hampshire","abbreviation":"NH"},{"name":"New Jersey","abbreviation":"NJ"},{"name":"New Mexico","abbreviation":"NM"},{"name":"New York","abbreviation":"NY"},{"name":"North Carolina","abbreviation":"NC"},{"name":"North Dakota","abbreviation":"ND"},{"name":"Ohio","abbreviation":"OH"},{"name":"Oklahoma","abbreviation":"OK"},{"name":"Oregon","abbreviation":"OR"},{"name":"Pennsylvania","abbreviation":"PA"},{"name":"Rhode Island","abbreviation":"RI"},{"name":"South Carolina","abbreviation":"SC"},{"name":"South Dakota","abbreviation":"SD"},{"name":"Tennessee","abbreviation":"TN"},{"name":"Texas","abbreviation":"TX"},{"name":"Utah","abbreviation":"UT"},{"name":"Vermont","abbreviation":"VT"},{"name":"Virginia","abbreviation":"VA"},{"name":"Washington","abbreviation":"WA"},{"name":"West Virginia","abbreviation":"WV"},{"name":"Wisconsin","abbreviation":"WI"},{"name":"Wyoming","abbreviation":"WY"},{"name":"Other","abbreviation":""}]')},27:function(e,t,c){},49:function(e,t,c){},59:function(e,t,c){}},[[143,1,2]]]);
//# sourceMappingURL=main.2cb8fbb4.chunk.js.map
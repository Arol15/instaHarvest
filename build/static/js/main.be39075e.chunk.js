(this["webpackJsonpinstaharvest-frontend"]=this["webpackJsonpinstaharvest-frontend"]||[]).push([[0],{141:function(e,t,c){},142:function(e,t,c){},143:function(e,t,c){},157:function(e,t,c){},177:function(e,t,c){},178:function(e,t,c){},179:function(e,t,c){},180:function(e,t,c){},181:function(e,t,c){},182:function(e,t,c){"use strict";c.r(t);var n,a,s=c(2),i=c.n(s),r=c(27),o=c.n(r),l=(c(63),c(12)),d=c(13),j=c(1),u=function(){var e=Object(d.f)();return Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:function(){return e.push("/add-product")},children:"Share"})})},b=c(4),m=c(25),p=c(6),O=function(e,t,c){var n=Object(s.useState)(Object(p.a)({},e)),a=Object(b.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)({}),l=Object(b.a)(o,2),d=l[0],j=l[1];return[r,function(e){e&&e.preventDefault();var n=c(i),a=0===Object.keys(n).length;j(n),a&&t()},function(e){r(Object(p.a)(Object(p.a)({},i),{},Object(m.a)({},e.target.name,e.target.value)))},i,d]},h=c(60),f=c.n(h),x=c(96),v=c(47),g=c.n(v),_=c(7),N=function(){return new Promise((function(e,t){g.a.post("/api/auth/logout",{}).then((function(){localStorage.removeItem("status"),localStorage.removeItem("app_data"),e(!0)})).catch((function(){t("Something went wrong")}))}))},w=function(){return"loggedIn"===localStorage.getItem("status")},C=function(e,t){switch(t.type){case"SEND":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,errorNum:null,error:null,data:null});case"RESPONSE":return{isLoading:!1,data:t.responseData,errorNum:null,error:null};case"ERROR":return{data:null,isLoading:!1,error:t.errorMessage,errorNum:t.errorNum};case"LOGOUT":return{isLoading:!1,errorNum:null,error:null,data:null};default:return}},y=function(){var e=Object(s.useReducer)(C,{isLoading:!1,error:null,errorNum:null,data:null}),t=Object(b.a)(e,2),c=t[0],n=t[1],a=Object(d.f)(),i=(Object(_.c)(),Object(s.useCallback)(function(){var e=Object(x.a)(f.a.mark((function e(t,c,s){var i,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"SEND"}),i={method:c,url:t,data:s,timeout:5e3},e.next=4,g()(i).then((function(e){return e}),(function(e){return e.response}));case 4:if(r=e.sent){e.next=8;break}return n({type:"ERROR",errorMessage:"Something went wrong",errorNum:500}),e.abrupt("return");case 8:401===r.status&&"unauthorized"===r.data.error&&N().then((function(){n({type:"LOGOUT"}),a.push("/login")})).catch((function(e){n({type:"ERROR",errorMessage:r.data.error,errorNum:r.status})})),r.status>=200&&r.status<300?n({type:"RESPONSE",responseData:r.data}):r.data.error?n({type:"ERROR",errorMessage:r.data.error,errorNum:r.status}):401===r.status?n({type:"ERROR",errorMessage:"Authorization denied. Please sign in or sign up",errorNum:401}):403===r.status?n({type:"ERROR",errorMessage:"Not enough privileges",errorNum:403}):n({type:"ERROR",errorMessage:"Something went wrong",errorNum:r.status});case 10:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),[]));return[c.isLoading,c.data,c.error,c.errorNum,i]},k=function(e){var t={};return e.password&&e.confirm_pass&&(e.password!==e.confirm_pass&&(t.confirm_pass="Passwords don't match"),/^[A-z0-9.!?,+]{6,}$/i.test(e.password)||(t.confirm_pass="Password should be at least 6 characters. Allowed characters: A-z 0-9 . , ! ? +")),Object.entries(e).forEach((function(e){var c=Object(b.a)(e,2),n=c[0],a=c[1];"username"===n&&(/^[a-z0-9._]{0,}$/.test(a)||(t.username="Allowed characters: a-z 0-9 . _")),"password"===n&&(a||(t.password="Please enter your password")),"confirm_pass"===n&&(a||(t.confirm_pass="Passwords don't match")),"login"===n&&(a||(t.login="Please enter your username or email")),"email"===n&&(a?/^[A-Z0-9.,_%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(a)||(t.email="Invalid email address"):t.email="Enter your email"),"first_name"===n&&(a||(t.first_name="Please enter you name")),"us_state"===n&&(a||(t.us_state="Please select state")),"city"===n&&(a||(t.city="Please enter city")),"body"===n&&(a||(t.body="Please enter something")),"search_term"===n&&(a?a.length<2&&(t.search_term="Your location is too short"):t.search_term="Please enter location"),"profile_addr"===n&&(a||(t.profile_addr="Field cannot be empty")),"name"===n&&(a||(t.name="Please enter name")),"product_type"===n&&(a||(t.product_type="Please select product type")),"description"===n&&(a||(t.description="Please describe your product")),"url"===n&&(a||(t.url="Please enter image url"))})),t},S=c(35),E=Object(S.b)({name:"modal",initialState:{open:!1,msg:null,timeOut:null,classes:null},reducers:{showMsg:function(e,t){var c=t.payload,n=c.msg,a=c.timeOut,s=c.classes;e.open=!0,e.msg=n,e.timeOut=a,e.classes=s},clearMsg:function(e){e.open=!1,e.msg=null,e.timeOut=null,e.classes=null}}}),P=E.actions,T=P.showMsg,M=P.clearMsg,A=function(e){return{open:e.modal.open,msg:e.modal.msg,timeOut:e.modal.timeOut,classes:e.modal.classes}},I=E.reducer,F=(c(141),function(e){return Object(j.jsx)("div",{className:"center",children:Object(j.jsxs)("div",{className:"indicator",children:[Object(j.jsx)("div",{className:"ind-chase-dot"}),Object(j.jsx)("div",{className:"ind-chase-dot"}),Object(j.jsx)("div",{className:"ind-chase-dot"}),Object(j.jsx)("div",{className:"ind-chase-dot"}),Object(j.jsx)("div",{className:"ind-chase-dot"}),Object(j.jsx)("div",{className:"ind-chase-dot"})]})})}),D=function(){var e=O({search_term:""},(function(){w()?p("/api/products/get-all-protected","post",a):p("/api/products/get-all","post",a)}),k),t=Object(b.a)(e,5),c=(t[0],t[1]),n=t[2],a=t[3],i=t[4],r=y(),o=Object(b.a)(r,5),l=o[0],u=o[1],m=o[2],p=(o[3],o[4]),h=Object(_.c)(),f=Object(d.f)();return Object(s.useEffect)((function(){u&&0===u.products.length?h(T({open:!0,msg:"No results per this location",classes:"mdl-error"})):u?f.push({pathname:"/search-results",state:u}):m&&h(T({open:!0,msg:m,classes:"mdl-error"}))}),[u,m]),Object(j.jsxs)(j.Fragment,{children:[l&&Object(j.jsx)(F,{}),Object(j.jsxs)("form",{children:[Object(j.jsx)("input",{type:"search",placeholder:"Enter your location",name:"search_term",onChange:n,value:a.search_term}),Object(j.jsx)("div",{className:"form-danger",children:i.search_term&&i.search_term}),Object(j.jsx)("button",{onClick:c,children:"Find"})]})]})},R=function(){return Object(j.jsx)("footer",{children:"All Icons and copyrights"})},L=function(){return Object(j.jsxs)("div",{className:"home",children:[Object(j.jsx)("h1",{children:"Welcome to instaHarvest"}),Object(j.jsx)(D,{}),Object(j.jsx)(u,{})]})},z=function(e){var t=e.children,c=e.parent,n=Object(s.useMemo)((function(){return document.createElement("div")}),[]);return Object(s.useEffect)((function(){var e=c&&c.appendChild?c:document.body;return e.appendChild(n),function(){e.removeChild(n)}}),[n,c]),o.a.createPortal(t,n)},H=c(9),B=c.n(H),U=(c(142),c(31)),V=function(e,t){switch(t.type){case"setActive":return Object(p.a)(Object(p.a)({},e),{},{active:t.active});case"setChildren":return Object(p.a)(Object(p.a)({},e),{},{children:t.children,classes:t.classes});case"setOpen":return Object(p.a)(Object(p.a)({},e),{},{isOpen:t.isOpen});case"setModal":return Object(p.a)(Object(p.a)({},e),{},{modal:t.modal})}},W=function(e){var t=e.withBackdrop,c=e.useTimer,n=e.timeOut,a=e.inPlace,i=e.disableClose,r=Object(s.useReducer)(V,{active:!1,isOpen:!1,children:null,classes:null,modal:null}),o=Object(b.a)(r,2),l=o[0],d=o[1],u=Object(s.useRef)(null),m=Object(_.c)(),p=function(){d({type:"setOpen",isOpen:!1})};return Object(s.useEffect)((function(){if(!0===t){var e=u.current,c=function(){return d({type:"setActive",active:l.isOpen})},n=function(e){return[27].indexOf(e.which)>=0&&p()},a=function(t){return t.target===e&&p()};return e&&(e.addEventListener("transitionend",c),i||(e.addEventListener("click",a),window.addEventListener("keyup",n))),function(){e&&(e.removeEventListener("transitionend",c),i||e.removeEventListener("click",a)),i||window.removeEventListener("keyup",n)}}}),[l.isOpen,l.modal]),Object(s.useEffect)((function(){!l.isOpen||t||a?l.isOpen&&window.setTimeout((function(){document.activeElement.blur(),d({type:"setActive",active:l.isOpen})}),10):m(T({open:!0,msg:l.children,classes:l.classes}))}),[l.isOpen]),Object(s.useEffect)((function(){var e;return l.isOpen&&c&&(e=setTimeout((function(){p()}),n||5e3)),function(){c&&clearTimeout(e)}}),[l.isOpen]),Object(s.useEffect)((function(){t?d({type:"setModal",modal:Object(j.jsx)("div",{children:(l.isOpen||l.active)&&Object(j.jsx)(z,{children:Object(j.jsx)("div",{ref:u,className:B()("backdrop",{"bd-active":l.active&&l.isOpen}),children:Object(j.jsxs)("div",{className:B()("modal",{"mdl-active":l.active&&l.isOpen}),children:[i&&Object(j.jsx)("div",{className:"mdl-close-button",onClick:p,children:Object(j.jsx)(U.e,{})}),l.children]})})})})}):a?d({type:"setModal",modal:Object(j.jsx)("div",{className:B()("mdl-inpl",l.classes,{"mdl-inpl-active":l.active&&l.isOpen}),children:l.children})}):j.Fragment}),[l.active,l.isOpen,l.children]),[l.modal,function(e,t){d({type:"setOpen",isOpen:!0}),d({type:"setChildren",children:e,classes:t})},p,l.isOpen]},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600,t=Object(s.useState)(window.innerWidth),c=Object(b.a)(t,2),n=c[0],a=c[1],i=Object(s.useState)(window.innerWidth>=e),r=Object(b.a)(i,2),o=r[0],l=r[1];return Object(s.useEffect)((function(){var e=function(){a(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(s.useEffect)((function(){o&&n<e?l(!1):!o&&n>=e&&l(!0)}),[n]),o},Y=(c(143),function(e){var t=e.title,c=e.closeModal,n=e.uploadFileAPI,a=e.imageUrlAPI,i=e.deleteImageAPI,r=Object(s.useState)(null),o=Object(b.a)(r,2),l=o[0],d=o[1],u=Object(s.useState)(),m=Object(b.a)(u,2),p=m[0],h=m[1],f=y(),x=Object(b.a)(f,5),v=x[0],g=x[1],_=x[2],N=(x[3],x[4]),w=W({withBackdrop:!1,useTimer:!0,inPlace:!0}),C=Object(b.a)(w,2),S=C[0],E=C[1],P=O({url:""},(function(){N(a,"POST",I)}),k),T=Object(b.a)(P,5),M=T[1],A=T[2],I=T[3],D=T[4],R=function(){d(null)};return Object(s.useEffect)((function(){g&&g.msg?(E(g.msg,"mdl-ok"),R()):_&&E(_,"mdl-error")}),[g,_]),Object(j.jsxs)("div",{className:"upload-image",children:[v&&Object(j.jsx)(F,{}),t&&Object(j.jsx)("h3",{children:t}),Object(j.jsx)("a",{onClick:function(){d("url")},children:"Save image url"}),Object(j.jsx)("a",{onClick:function(){d("upload")},children:"Upload photo"}),Object(j.jsx)("a",{onClick:function(){d("delete")},children:"Delete photo"}),"upload"===l&&Object(j.jsxs)("form",{encType:"multipart/form-data",children:[Object(j.jsx)("input",{type:"file",name:"image_url",accept:"image/*",onChange:function(e){e&&e.preventDefault(),h(e.target.files[0])}}),Object(j.jsx)("button",{onClick:function(e){if(e&&e.preventDefault(),"upload"===l)if(p.size>1e6)E("Image size should be less then 1mb","mdl-error");else{var t=new FormData;t.append("file",p),N(n,"POST",t)}},children:"Submit"}),Object(j.jsx)("button",{onClick:R,children:"Cancel"})]}),"url"===l&&Object(j.jsxs)("form",{children:[Object(j.jsx)("input",{placeholder:"Enter image url",type:"text",name:"url",onChange:A,value:I.url||""}),Object(j.jsx)("div",{className:"form-danger",children:D.url&&D.url}),Object(j.jsx)("button",{onClick:M,children:"Submit"}),Object(j.jsx)("button",{onClick:R,children:"Cancel"})]}),"delete"===l&&Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:"Delete image? Are you sure?"}),Object(j.jsx)("button",{onClick:R,children:"No"}),Object(j.jsx)("button",{onClick:function(){d("delete-confirmed"),N(i,"POST",{})},children:"Yes"})]}),"delete-confirmed"===l&&Object(j.jsx)("p",{children:"Image is deleting..."}),g&&Object(j.jsx)("button",{onClick:function(){c(),window.location.reload()},children:"Close"}),S]})}),J=(n="app_data")&&JSON.parse(localStorage.getItem(n)),$=Object(S.b)({name:"profile",initialState:{username:null,first_name:J?J.first_name:null,last_name:null,email:null,profile_addr:null,zip_code:null,address:null,image_url:J?J.image_url:null,image_back_url:J?J.image_back_url:null,email_verified:J?J.email_verified:null,city:J?J.city:null,us_state:J?J.us_state:null,created_at:J?J.created_at:null},reducers:{updateProfile:function(e,t){var c=t.payload,n=c.username,a=c.first_name,s=c.last_name,i=c.email,r=c.profile_addr,o=c.zip_code,l=c.address,d=c.image_url,j=c.image_back_url,u=c.email_verified,b=c.city,m=c.us_state,p=c.created_at;!function(e,t){localStorage.setItem(e,JSON.stringify(t))}("app_data",{first_name:a,image_url:d,image_back_url:j,email_verified:u,city:b,us_state:m,created_at:p}),e.username=n,e.first_name=a,e.last_name=s,e.email=i,e.profile_addr=r,e.zip_code=o,e.address=l,e.image_url=d,e.image_back_url=j,e.email_verified=u,e.city=b,e.us_state=m,e.created_at=p}}}),Z=$.actions.updateProfile,G=function(e){return{username:e.profile.username,first_name:e.profile.first_name,last_name:e.profile.last_name,email:e.profile.email,profile_addr:e.profile.profile_addr,zip_code:e.profile.zip_code,address:e.profile.address,image_url:e.profile.image_url,image_back_url:e.profile.image_back_url,email_verified:e.profile.email_verified,city:e.profile.city,us_state:e.profile.us_state,created_at:e.profile.created_at}},q=$.reducer,X=(c(34),function(e){var t=e.edit,c=e.profileImg,n=e.profileBackImg,a=Object(_.d)(G,_.b),s=(Object(d.f)(),W({withBackdrop:!0,useTimer:!1,inPlace:!1})),i=Object(b.a)(s,3),r=i[0],o=i[1],l=i[2];return Object(j.jsxs)(j.Fragment,{children:[r,a&&Object(j.jsxs)("div",{className:"prf-header",children:[Object(j.jsxs)("div",{className:"prf-back-block",children:[Object(j.jsx)("img",{className:"prf-back-img",src:n||a.image_back_url}),t&&Object(j.jsx)("div",{children:Object(j.jsx)("a",{onClick:function(){o(Object(j.jsx)(Y,{title:"Set profile background image",closeModal:l,uploadFileAPI:"/api/account/update_back_image_file",imageUrlAPI:"/api/account/update_back_image_url",deleteImageAPI:"/api/account/delete_back_image"}))},children:"Edit"})})]}),Object(j.jsxs)("div",{className:"prf-img-block",children:[Object(j.jsx)("img",{className:"prf-img",src:c||a.image_url}),t&&Object(j.jsx)("div",{}),t&&Object(j.jsx)("a",{onClick:function(){o(Object(j.jsx)(Y,{title:"Set profile image",closeModal:l,uploadFileAPI:"/api/account/update_profile_image_file",imageUrlAPI:"/api/account/update_profile_image_url",deleteImageAPI:"/api/account/delete_profile_image"}))},children:"Edit"})]})]})]})}),Q=c(100),ee=c(99),te=function(e){var t=e.verified,c=e.children;return Object(j.jsxs)("div",{children:[c,Object(j.jsxs)("span",{className:"tooltip",children:[t?Object(j.jsx)(ee.a,{size:"24px",color:"#4e9340"}):Object(j.jsx)(Q.a,{size:"24px"}),Object(j.jsx)("span",{className:"tooltiptext",children:t?"Email verified":"Email not verified"})]})]})},ce=c(30),ne=function(e){var t=e.firstName,c=e.emailVerified,n=e.city,a=e.usState,s=e.joined;return Object(j.jsxs)("div",{className:"prf-pbl-top",children:[Object(j.jsx)(te,{verified:c,children:Object(j.jsx)("h2",{className:"inline-block",children:t})}),Object(j.jsxs)("p",{children:[n,", ",ce.find((function(e){return e.name===a})).abbreviation]}),Object(j.jsxs)("p",{children:["Joined: ",s]})]})},ae=(c(72),c(101)),se=c.n(ae),ie=function(e,t){if(!e||0===e.length)return"";var c=new Date("".concat(e,"+00:00")),n=Intl.DateTimeFormat().resolvedOptions().timeZone,a=se()().tz(n).utcOffset()/60,s=c.getHours();c.setHours(s+a);var i=c.toISOString().replace("T"," ").slice(0,16);if("month-year"===t){var r=c.toDateString().slice(4,7),o=c.toDateString().slice(11);return"".concat(r," ").concat(o)}return"".concat(i)},re=function(){var e=y(),t=Object(b.a)(e,5),c=t[0],n=t[1],a=t[2],i=t[3],r=t[4],o=Object(_.c)(),l=Object(d.f)();return Object(s.useEffect)((function(){r("/api/chat/get_user_chats","POST",{})}),[]),Object(s.useEffect)((function(){a&&o(T({open:!0,msg:a,classes:"mdl-error"}))}),[n,a,i]),Object(j.jsxs)(j.Fragment,{children:[c&&Object(j.jsx)(F,{}),n&&n.chats.map((function(e,t){return Object(j.jsxs)("div",{className:"chat-user-chats",onClick:function(){return function(e){l.push({pathname:"/chats/".concat(e.recipient_name),state:Object(p.a)({},e)})}(e)},children:[Object(j.jsx)("img",{className:"chat-img",src:e.recipient_img}),Object(j.jsxs)("div",{className:"chat-last-msg",children:[Object(j.jsx)("b",{children:e.recipient_name}),Object(j.jsx)("p",{children:Object(j.jsx)("i",{children:e.last_message})}),Object(j.jsx)("p",{children:ie(e.last_date)})]})]},t)}))]})},oe=function(e){var t=e.product,c=e.onDelete,n=e.user_id,a=Object(d.f)(),s=Object(d.g)().pathname,i={border:"1px solid black",margin:"5px"},r=W({withBackdrop:!0,useTimer:!1,inPlace:!1}),o=Object(b.a)(r,3),l=o[0],u=o[1],m=o[2],p=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h3",{children:"Are you sure to delete?"}),Object(j.jsx)("button",{onClick:function(){return c(t.product_id)},children:"Yes"}),Object(j.jsx)("button",{onClick:function(){return m()},children:"No"})]});return Object(j.jsxs)(j.Fragment,{children:[n===t.user_id||"/user-products"===s?Object(j.jsxs)("div",{style:i,children:[Object(j.jsx)("p",{children:t.name}),Object(j.jsx)("p",{children:t.description}),Object(j.jsxs)("p",{children:["$",t.price]}),Object(j.jsx)("button",{onClick:function(){return function(e){a.push("edit-product",e)}(t)},children:"Edit Product"})]}):Object(j.jsxs)("div",{onClick:function(){return function(e){a.push("/product-info",e)}(t)},style:i,className:"product",children:[Object(j.jsx)("p",{children:t.name}),Object(j.jsx)("p",{children:t.description}),Object(j.jsxs)("p",{children:["$",t.price]})]}),"/search-results"===s?null:Object(j.jsx)("button",{onClick:function(){u(p)},children:"Delete Product"}),l]})},le=function(){var e=Object(s.useState)([]),t=Object(b.a)(e,2),c=t[0],n=t[1],a=y(),i=Object(b.a)(a,5),r=i[0],o=i[1],l=(i[2],i[3],i[4]),d=function(){l("/api/products/products-per-user","post",null)};Object(s.useEffect)((function(){d()}),[]),Object(s.useEffect)((function(){o&&"deleted"===o.msg?d():o&&n(o.user_products)}),[o]);var u=function(e){l("/api/products/delete_product","delete",{product_id:e})};return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"All your products are here! "}),r&&Object(j.jsx)(F,{}),c&&c.map((function(e){return Object(j.jsx)("div",{children:Object(j.jsx)(oe,{product:e,onDelete:u})},e.product_id)}))]})},de=function(e){var t=e.tab,c=Object(d.f)(),n=Object(s.useState)(t||"products"),a=Object(b.a)(n,2),i=a[0],r=a[1],o=Object(_.d)(G,_.b),l=Object(_.c)(),u=y(),m=Object(b.a)(u,5),O=(m[0],m[1]),h=m[2],f=m[3],x=m[4];return Object(s.useLayoutEffect)((function(){!1===w()?N().then((function(){c.push("/login")})).catch((function(){})):x("/api/account/get_profile_private","POST",{})}),[]),Object(s.useEffect)((function(){O&&O.msg?l(T({open:!0,msg:O.msg,classes:"mdl-ok"})):O&&l(Z(Object(p.a)({},O))),h&&l(T({open:!0,msg:h,classes:"mdl-error"}))}),[O,h,f]),Object(j.jsx)(j.Fragment,{children:o&&Object(j.jsxs)("div",{className:"profile",children:[Object(j.jsx)(X,{edit:!1}),Object(j.jsx)(ne,{firstName:o.first_name,emailVerified:o.email_verified,city:o.city,usState:o.us_state,joined:ie(o.created_at,"month-year")}),Object(j.jsx)("button",{onClick:function(){c.push("/profile/edit")},children:"Edit profile"}),Object(j.jsxs)("div",{className:"prf-main-menu",children:[Object(j.jsx)("hr",{className:"hr-top"}),Object(j.jsxs)("div",{className:"prf-main-menu-tabs",children:[Object(j.jsx)("div",{onClick:function(){c.push("/profile"),r("products")},className:B()({"prf-main-menu-active":"products"===i}),children:"Products"}),Object(j.jsx)("div",{onClick:function(){c.push("/chats"),r("chats")},className:B()({"prf-main-menu-active":"chats"===i}),children:"Chats"})]}),Object(j.jsx)("hr",{className:"hr-bottom"})]}),Object(j.jsxs)("div",{className:"prf-body",children:["chats"===i&&Object(j.jsx)(re,{}),"products"===i&&Object(j.jsx)(le,{})]})]})})},je=c(107),ue=function(){var e=Object(s.useState)({latitude:26.0112,longitude:-80.1495,width:"100vw",height:"100vh",zoom:8}),t=Object(b.a)(e,2),c=t[0],n=t[1];return Object(j.jsx)("div",{children:Object(j.jsx)(je.a,Object(p.a)(Object(p.a)({},c),{},{mapboxApiAccessToken:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MAPBOX_TOKEN,mapStyles:"mapbox://styles/arol15/ckmoaqw8a43jc17qslhph1v2k",onViewportChange:function(e){n(e)},children:"markers here"}))})},be=function(){var e=Object(d.g)(),t=e.state.products;return Object(j.jsxs)(j.Fragment,{children:[e.state.user_id?t.map((function(t){return Object(j.jsx)("div",{children:Object(j.jsx)(oe,{product:t,user_id:e.state.user_id})},t.product_id)})):t.map((function(e){return Object(j.jsx)("div",{children:Object(j.jsx)(oe,{product:e})},e.product_id)})),Object(j.jsx)("div",{children:Object(j.jsx)(ue,{})})]})},me=function(e){var t=e.view,c=e.inModal,n=e.closeModal,a=e.user,i=e.afterConfirm,r=y(),o=Object(b.a)(r,5),u=o[0],m=o[1],h=o[2],f=o[3],x=o[4],v=Object(d.f)(),g=Object(_.c)(),N=W({withBackdrop:!1,useTimer:!0,inPlace:!!c}),C=Object(b.a)(N,2),S=C[0],E=C[1];w()&&!c&&v.push("/profile");var P=O({},(function(e){x("login"===t||"confirm"===t?"/api/auth/login":"/api/auth/signup","post",D)}),k),T=Object(b.a)(P,5),M=T[0],A=T[1],I=T[2],D=T[3],R=T[4];return Object(s.useEffect)((function(){"login"===t?M({login:"",password:""}):"signup"===t?M({email:"",password:"",confirm_pass:"",username:"",first_name:"",state:"",city:""}):"confirm"===t&&M({login:a,password:""})}),[t]),Object(s.useEffect)((function(){m&&(localStorage.setItem("status","loggedIn"),g(Z(Object(p.a)({},m))),i&&n?(n(),i()):i?i():n||v.push("/profile"))}),[m]),Object(s.useEffect)((function(){h?E(h,"mdl-error"):m&&m.msg&&E(m.msg,"mdl-ok")}),[h,f,m]),Object(j.jsxs)("div",{children:[S,u&&Object(j.jsx)(F,{}),"login"===t&&Object(j.jsx)("h1",{children:"Log In"}),"signup"===t&&Object(j.jsx)("h1",{children:"Sign Up"}),"confirm"===t&&Object(j.jsx)("h1",{children:"Confirm identity"}),Object(j.jsxs)("form",{onSubmit:A,children:[Object(j.jsxs)("div",{className:"auth-inputs",children:["login"===t&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"text",placeholder:"Email/Username",name:"login",onChange:I,value:D.login||""},"1"),Object(j.jsx)("div",{className:"form-danger",children:R.login&&R.login})]}),"signup"===t&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"text",placeholder:"Username",name:"username",onChange:I,value:D.username||""}),Object(j.jsx)("div",{className:"form-danger",children:R.username&&R.username})]}),"signup"===t&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"text",placeholder:"Email",name:"email",onChange:I,value:D.email||""}),Object(j.jsx)("div",{className:"form-danger",children:R.email&&R.email})]}),"confirm"===t&&Object(j.jsx)("p",{children:D.login}),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"password",placeholder:"Password",name:"password",onChange:I,value:D.password||""},"4"),Object(j.jsx)("div",{className:"form-danger",children:R.password&&R.password})]}),"signup"===t&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"password",placeholder:"Confirm password",name:"confirm_pass",onChange:I,value:D.confirm_pass||""},"15"),Object(j.jsx)("div",{className:"form-danger",children:R.confirm_pass&&R.confirm_pass}),Object(j.jsx)("input",{type:"text",placeholder:"First Name",name:"first_name",onChange:I,value:D.first_name||""},"5"),Object(j.jsx)("div",{className:"form-danger",children:R.first_name&&R.first_name}),Object(j.jsxs)("select",{placeholder:"State",name:"state",onChange:I,value:D.state||"",children:[Object(j.jsx)("option",{value:"",children:"Select state"},"-"),ce.map((function(e){return Object(j.jsx)("option",{value:ce.name,children:e.name},e.abbreviation)}))]},"6"),Object(j.jsx)("div",{className:"form-danger",children:R.state&&R.state}),Object(j.jsx)("input",{type:"text",placeholder:"City",name:"city",onChange:I,value:D.city||""},"7"),Object(j.jsx)("div",{className:"form-danger",children:R.city&&R.city})]})]}),Object(j.jsx)("input",{type:"submit",disabled:u},"8")]}),c?null:"login"===t?Object(j.jsx)(l.b,{to:"/signup",children:"Sign Up"}):Object(j.jsx)(l.b,{to:"/login",children:"Login"}),Object(j.jsx)("p",{}),"login"===t&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(l.b,{onClick:n,to:"/reset_password",children:"Forgot your password?"}),Object(j.jsx)("p",{})]})]})},pe=function(){return Object(j.jsx)("h1",{children:"Page Not Found"})},Oe=function(e){var t=y(),c=Object(b.a)(t,5),n=c[0],a=c[1],i=c[2],r=(c[3],c[4]);return Object(s.useEffect)((function(){r("/api/account/".concat(e.match.params.addr),"GET",{})}),[]),Object(j.jsxs)(j.Fragment,{children:[n&&Object(j.jsx)(F,{}),i&&Object(j.jsx)("h1",{children:"Profile Not Found"}),a&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(X,{edit:!1,profileImg:a.image_url,profileBackImg:a.image_back_url}),Object(j.jsx)(ne,{firstName:a.first_name,emailVerified:a.email_verified,city:a.city,usState:a.us_state,joined:ie(a.created_at,"month-year")})]})]})},he=function(e){var t=Object(d.f)(),c=y(),n=Object(b.a)(c,5),a=n[0],i=n[1],r=n[2],o=n[3],l=n[4],u=Object(_.c)(),m=O(e.reset?{email:""}:{password:"",confirm_pass:""},(function(){e.reset?l("/api/auth/reset_password","POST",{email:x.email}):l("/api/auth/reset_password_confirm","POST",{password:x.password,token:e.match.params.token})}),k),p=Object(b.a)(m,5),h=p[1],f=p[2],x=p[3],v=p[4];return Object(s.useEffect)((function(){r?u(T({open:!0,msg:r,classes:"mdl-error"})):i&&i.msg&&(u(T({open:!0,msg:i.msg,classes:"mdl-ok"})),e.reset,t.push("/login"))}),[r,o,i]),Object(j.jsxs)(j.Fragment,{children:[a&&Object(j.jsx)(F,{}),Object(j.jsx)("h1",{children:"Reset Password"}),e.reset?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:"Enter your email address below"}),Object(j.jsxs)("form",{onSubmit:h,children:[Object(j.jsx)("label",{children:"Email: "}),Object(j.jsx)("input",{type:"text",placeholder:"Email",name:"email",onChange:f,value:x.email||""},"9"),Object(j.jsx)("div",{className:"form-danger",children:v.email&&v.email}),Object(j.jsx)("input",{type:"submit",disabled:a},"8")]})]}):Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("form",{onSubmit:h,children:[Object(j.jsx)("label",{children:"New password: "}),Object(j.jsx)("input",{type:"password",placeholder:"Password",name:"password",onChange:f,value:x.password||""},"4"),Object(j.jsx)("div",{className:"form-danger",children:v.password&&v.password}),Object(j.jsx)("label",{children:"Confirm password: "}),Object(j.jsx)("input",{type:"password",placeholder:"Confirm password",name:"confirm_pass",onChange:f,value:x.confirm_pass||""},"15"),Object(j.jsx)("div",{className:"form-danger",children:v.confirm_pass&&v.confirm_pass}),Object(j.jsx)("input",{type:"submit",disabled:a},"87")]})})]})},fe=function(){var e=Object(_.d)(A,_.b),t=e.open,c=e.msg,n=e.timeOut,a=e.classes,i=Object(_.c)(),r=Object(s.useState)(!1),o=Object(b.a)(r,2),l=o[0],d=o[1];return Object(s.useEffect)((function(){t&&window.setTimeout((function(){document.activeElement.blur(),d(t)}),10)}),[t]),Object(s.useEffect)((function(){var e;return t&&(e=setTimeout((function(){i(M())}),n||7e3)),function(){clearTimeout(e)}}),[t]),Object(s.useEffect)((function(){var e;return t&&(e=setTimeout((function(){d(!1)}),n?n-1e3:6e3)),function(){clearTimeout(e)}}),[l]),Object(j.jsx)(j.Fragment,{children:(t||l)&&Object(j.jsx)(z,{children:Object(j.jsx)("div",{className:B()("mdl-msg",a,{"mdl-msg-active":l}),children:c})})})},xe=c(62),ve=c(104),ge=(c(157),function(e){var t=e.children,c=e.open,n=e.button,a=e.onClick,i=e.classContainer,r=e.classMenu,o=e.classActive,l=Object(s.useState)({clContainer:i||"menu-container",clMenu:r||"menu",clActive:o||"menu-active"}),d=Object(b.a)(l,1)[0],u=Object(s.useRef)(null);return Object(s.useEffect)((function(){var e=function(e){null===u.current||u.current.contains(e.target)||a()};if(c)return window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}),[c]),Object(j.jsxs)("div",{className:d.clContainer,children:[n,Object(j.jsx)("nav",{ref:u,className:B()(d.clMenu,Object(m.a)({},d.clActive,c)),children:Object(j.jsx)("div",{className:"menu-elements",children:t})})]})}),_e=function(e){var t=e.msgId,c=e.onDeleteMsg,n=e.body,a=e.createdAt,i=e.sender,r=e.image,o=n.split("\n").map((function(e,t){return Object(j.jsx)("p",{children:e},t)})),l=Object(s.useState)(!1),d=Object(b.a)(l,2),u=d[0],m=d[1],p=function(){m(!u)};return Object(j.jsxs)("div",{className:B()("msg-container","Me"===i?"msg-cnt-self":"msg-cnt-reciv"),children:["Me"!==i&&Object(j.jsx)("img",{className:"chat-img",src:r}),Object(j.jsxs)("div",{className:B()("msg-body","Me"===i?"msg-body-self":"msg-body-reciv"),children:[o,Object(j.jsx)("p",{children:a})]}),"Me"===i&&Object(j.jsx)(ge,{open:u,button:Object(j.jsx)("button",{className:"msg-menu-button",onClick:p,children:Object(j.jsx)(ve.a,{})}),onClick:p,children:Object(j.jsx)("a",{onClick:function(){c(t),m(!u)},children:"Delete"})})]})},Ne=Object(s.memo)(_e),we=c(106),Ce=c(105),ye={baseUrl:"https://www.instaharvest.net/",endPoint:"https://www.instaharvest.net"},ke=function(){var e=y(),t=Object(b.a)(e,5),c=t[0],n=t[1],i=t[2],r=t[3],o=t[4],l=y(),u=Object(b.a)(l,5),m=u[0],h=u[1],f=u[2],x=u[3],v=(u[4],Object(s.useState)()),g=Object(b.a)(v,2),N=g[0],w=g[1],C=Object(s.useRef)(),S=Object(d.g)(),E=Object(s.useState)(S.state?Object(p.a)({},S.state):null),P=Object(b.a)(E,2),M=P[0],A=(P[1],Object(d.f)()),I=Object(_.c)(),D=O({body:"",recipient_id:M&&M.recipient_id},(function(){!function(e,t,c){a&&a.emit("send_msg",Object(p.a)(Object(p.a)({},e),{},{chat_id:t,user_id:c}))}(B,M.chat_id,M.user_id),L(Object(p.a)(Object(p.a)({},B),{},{body:""}))}),k),R=Object(b.a)(D,5),L=R[0],z=R[1],H=R[2],B=R[3],U=R[4],V=function(e){var t,c;t=e,c=M.chat_id,a&&a.emit("delete_msg",{chat_id:c,msg_id:t})};Object(s.useEffect)((function(){var e;return M||A.push("/chats"),W(),e=M.chat_id,(a=Object(Ce.io)(ye.endPoint))&&e&&a.emit("join",e),function(e,t){if(!a)return!0;a.on("send_msg",(function(t){return e(null,t)})),a.on("delete_msg",(function(){return t()}))}((function(e,t){e||w((function(e){return[].concat(Object(xe.a)(e),[t])}))}),(function(){W()})),function(){!function(e){a&&(a.emit("leave",e),a.disconnect())}(M.chat_id)}}),[]);var W=function(){o("/api/chat/get_chat_messages","POST",{chat_id:M.chat_id})};return Object(s.useEffect)((function(){i?I(T({open:!0,msg:i,classes:"mdl-error"})):n&&(L(Object(p.a)(Object(p.a)({},B),{},{chat_id:M.chat_id})),w(Object(xe.a)(n.msgs)))}),[i,r,n]),Object(s.useEffect)((function(){f?I(T({open:!0,msg:f,classes:"mdl-error"})):h&&(W(),L(Object(p.a)(Object(p.a)({},B),{},{body:""})))}),[h,f,x]),Object(s.useEffect)((function(){C.current&&C.current.scrollIntoView()}),[N]),M&&Object(j.jsxs)("div",{className:"chat",children:[(c||m)&&Object(j.jsx)(F,{}),Object(j.jsxs)("div",{className:"chat-header",children:[Object(j.jsxs)("h1",{children:["Chat with ",M&&M.recipient_name]}),Object(j.jsx)("button",{onClick:function(){A.goBack()},className:"chat-back-button",children:Object(j.jsx)(we.a,{})})]}),Object(j.jsx)("div",{className:"chat-scroll",children:N&&N.map((function(e,t){var c=parseInt(e.sender_id)===parseInt(M&&M.recipient_id)?M&&M.recipient_name:"Me";return Object(j.jsx)("div",{ref:t===N.length-1?C:null,children:Object(j.jsx)(Ne,{msgId:e.msg_id,onDeleteMsg:V,createdAt:ie(e.created_at),sender:c,body:e.body,image:e.sender_img})},t)}))}),N&&Object(j.jsx)("div",{className:"chat-footer",children:Object(j.jsxs)("form",{children:[Object(j.jsx)("textarea",{rows:3,type:"text",name:"body",onChange:H,value:B.body||""}),Object(j.jsx)("div",{className:"form-danger",children:U.body&&U.body}),Object(j.jsx)("button",{onClick:z,children:"Send"})]})})]})},Se=(c(177),c(178),c(184)),Ee=c(185),Pe=function(e){var t=e.closeModal,c=e.afterConfirm,n=Object(s.useState)("login"),a=Object(b.a)(n,2),i=a[0],r=a[1],o=function(){r("login"===i?"signup":"login")};return Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{disabled:"login"===i,className:B()("authButton",{active:"login"===i}),onClick:o,children:"Log In"}),Object(j.jsx)("button",{disabled:"signup"===i,className:B()("authButton",{active:"signup"===i}),onClick:o,children:"Sign Up"}),Object(j.jsx)(Se.a,{children:Object(j.jsx)(Ee.a,{addEndListener:function(e,t){return e.addEventListener("transitionend",t,!1)},classNames:"fade",children:Object(j.jsx)(me,{view:i,inModal:!0,closeModal:t,afterConfirm:c})},i)})]})},Te=(c(179),function(e){var t=e.name,c=e.handleInputChange,n=e.inputValue,a=e.formData,i=e.setFormData,r=Object(s.useState)(!0),o=Object(b.a)(r,2),l=o[0],d=o[1];return Object(j.jsxs)("div",{className:"switch",children:[Object(j.jsx)("span",{className:B()("switch-click",{"switch-click-left":l}),onClick:function(){l?d(!1):(i(Object(p.a)(Object(p.a)({},a),{},Object(m.a)({},t,0))),d(!0))}}),Object(j.jsx)("span",{className:B()("switch-text",{"switch-text-right":!l}),children:"Free"}),Object(j.jsx)("span",{className:B()("slider",{"slider-right":!l})}),Object(j.jsx)("input",{className:B()("switch-input",{"switch-input-hide":l}),type:"number",name:t,placeholder:"$",onChange:c,value:n}),Object(j.jsx)("span",{className:B()("input-label",{"input-label-hide":l}),children:"Enter price"})]})}),Me=function(){var e=Object(d.f)(),t=y(),c=Object(b.a)(t,5),n=c[0],a=c[1],i=c[2],r=c[3],o=c[4],l=Object(_.c)(),u=W({withBackdrop:!0,useTimer:!1,inPlace:!1,disableClose:!0}),m=Object(b.a)(u,3),p=m[0],h=m[1],f=m[2],x=O({name:"",product_type:"",image_urls:[],price:0,status:"",description:""},(function(){o("/api/products/add-product","post",S)}),k),v=Object(b.a)(x,5),g=v[0],N=v[1],C=v[2],S=v[3],E=v[4],P=function(){f(),window.location.reload()};return Object(s.useEffect)((function(){w()||h(Object(j.jsx)(Pe,{afterConfirm:P}))}),[]),Object(s.useEffect)((function(){i?l(T({open:!0,msg:i,classes:"mdl-error"})):a&&(l(T({open:!0,msg:"Product has been added!",classes:"mdl-ok"})),e.push("/user-products"))}),[a,i,r]),Object(j.jsxs)(j.Fragment,{children:[n&&Object(j.jsx)(F,{}),Object(j.jsxs)("div",{className:"add-product",children:[Object(j.jsx)("h2",{children:"Share Your Product"}),Object(j.jsxs)("form",{onSubmit:N,children:[Object(j.jsx)("label",{children:"Name of your product"}),Object(j.jsx)("input",{className:"add-product-input",placeholder:"Name",type:"text",name:"name",onChange:C,value:S.name||""}),Object(j.jsx)("div",{className:"form-danger",children:E.name&&E.name}),Object(j.jsx)("label",{children:"Product Type:"}),Object(j.jsxs)("select",{name:"product_type",onChange:C,value:S.product_type||"",children:[Object(j.jsx)("option",{children:"Select Product Type"}),Object(j.jsx)("option",{children:"Fruit"}),Object(j.jsx)("option",{children:"Vegetable"}),Object(j.jsx)("option",{children:"Herb"}),Object(j.jsx)("option",{children:"Other"})]}),Object(j.jsx)("div",{className:"form-danger",children:E.product_type&&E.product_type}),Object(j.jsx)("label",{children:"Pictures"}),Object(j.jsx)("input",{className:"add-product-input",type:"file",name:"image_urls",onChange:C,value:S.image_urls||""}),Object(j.jsx)("label",{children:"Price: "}),Object(j.jsx)(Te,{name:"price",handleInputChange:C,inputValue:S.price||"",setFormData:g,formData:S}),Object(j.jsx)("label",{children:"Description: "}),Object(j.jsx)("textarea",{rows:3,placeholder:"Describe your product",type:"textarea",name:"description",onChange:C,value:S.description||""}),Object(j.jsx)("div",{className:"form-danger",children:E.description&&E.description}),Object(j.jsx)("button",{children:"Add Product"})]})]}),p]})},Ae=function(){var e=Object(d.f)(),t=Object(d.g)(),c=t.state.user_id,n=y(),a=Object(b.a)(n,5),i=a[0],r=a[1],o=(a[2],a[3],a[4]),l=Object(s.useState)({}),u=Object(b.a)(l,2),m=u[0],p=u[1],O=W({withBackdrop:!0,useTimer:!1,inPlace:!1}),h=Object(b.a)(O,3),f=h[0],x=h[1],v=(h[2],function(t,c,n){e.push({pathname:"/chats/".concat(c),state:{recipientId:t,recipientName:c,recipientImg:n}})}),g=function(){v(t.state.user_id,m.first_name,m.image_url),window.location.reload()};return Object(s.useEffect)((function(){o("/api/products/product-location-info/".concat(c),"get")}),[]),Object(s.useEffect)((function(){r&&p(r.product_details)}),[r]),Object(j.jsxs)(j.Fragment,{children:[i&&Object(j.jsx)(F,{}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:["Product: ",t.state.name]}),Object(j.jsxs)("p",{children:["About this product: ",t.state.description]}),Object(j.jsxs)("div",{children:["Location for map: ",m.lat," and ",m.lgt]}),w()?Object(j.jsx)("button",{onClick:function(){return v(t.state.user_id,m.first_name,m.image_url)},children:"Connect with seller"}):Object(j.jsx)("button",{onClick:function(){return x(Object(j.jsx)(Pe,{afterConfirm:g}))},children:"Connect with Seller"})]}),f]})},Ie=(c(180),function(){var e=Object(d.f)(),t=Object(_.d)(G,_.b).image_url,c=Object(_.c)(),n=W({withBackdrop:!0,useTimer:!1,inPlace:!1}),a=Object(b.a)(n,3),i=a[0],r=a[1],o=a[2],u=Object(s.useState)(!1),m=Object(b.a)(u,2),p=m[0],O=m[1],h=function(t){t&&N().then((function(){e.push("/")})).catch((function(e){c(T({open:!0,msg:e,classes:"mdl-error"}))})),o(),O(!1)},f=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:"Are you sure to logout?"}),Object(j.jsx)("button",{onClick:function(){return h(!0)},children:"Yes"}),Object(j.jsx)("button",{onClick:function(){return h(!1)},children:"No"})]}),x=function(){O(!p)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("nav",{className:"main-navbar",children:[Object(j.jsx)("div",{className:"main-navbar-logo",children:Object(j.jsx)(l.b,{to:"/",children:"instaHarvest"})}),Object(j.jsx)("div",{children:Object(j.jsx)(l.b,{to:"/add-product",children:"Share your Product"})}),w()?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(ge,{open:p,button:Object(j.jsx)("div",{children:Object(j.jsx)("img",{className:"main-navbar-profile",src:t,onClick:x,alt:""})}),onClick:x,children:[Object(j.jsx)(l.b,{onClick:x,to:"/profile",children:"Profile"}),Object(j.jsx)("a",{onClick:function(){r(f)},children:"Logout"})]})}):Object(j.jsx)("div",{className:"main-navbar-links",children:Object(j.jsx)("a",{onClick:function(){return r(Object(j.jsx)(Pe,{closeModal:o,afterConfirm:function(){o(),e.push("/profile")}}))},children:"Sign In"})})]}),i]})}),Fe=(c(181),function(){var e=Object(d.g)(),t=Object(d.f)(),c=e.state,n=Object(_.c)(),a=y(),i=Object(b.a)(a,5),r=i[1],o=i[2],l=i[3],u=i[4],m=O({name:c.name,product_type:c.product_type,image_urls:c.urls,price:c.price,status:c.status,description:c.description},(function(){u("/api/products/edit-product/".concat(c.product_id),"patch",x)}),k),p=Object(b.a)(m,5),h=(p[0],p[1]),f=p[2],x=p[3];p[4];return Object(s.useEffect)((function(){o?n(T({open:!0,msg:o,classes:"mdl-error"})):r&&(n(T({open:!0,msg:"Product has been added!",classes:"mdl-ok"})),t.push("/user-products"))}),[r,o,l]),Object(j.jsxs)("div",{className:"edit-product",children:[Object(j.jsx)("h2",{children:"Edit Your Product"}),Object(j.jsxs)("form",{onSubmit:h,children:[Object(j.jsx)("label",{children:"Name of your product"}),Object(j.jsx)("input",{placeholder:"Name",type:"text",name:"name",onChange:f,value:x.name}),Object(j.jsx)("label",{children:"Product Type:"}),Object(j.jsxs)("select",{name:"product_type",onChange:f,value:x.product_type,children:[Object(j.jsx)("option",{children:"Select Product Type"}),Object(j.jsx)("option",{children:"Fruit"}),Object(j.jsx)("option",{children:"Vegetable"}),Object(j.jsx)("option",{children:"Herb"}),Object(j.jsx)("option",{children:"Other"})]}),Object(j.jsx)("label",{children:"Pictures"}),Object(j.jsx)("input",{type:"file",name:"image_urls",onChange:f,value:x.image_urls}),Object(j.jsx)("label",{children:"Price: "}),Object(j.jsx)("input",{placeholder:"$0.00",type:"number",name:"price",onChange:f,value:x.price}),Object(j.jsx)("label",{children:"Description: "}),Object(j.jsx)("textarea",{placeholder:"Describe your product",type:"textarea",name:"description",onChange:f,value:x.description}),Object(j.jsx)("button",{children:"Save Changes"}),Object(j.jsx)("button",{onClick:function(){t.push("/user-products")},children:"Cancel"})]})]})}),De=function(e){var t=Object(s.useState)(!1),c=Object(b.a)(t,2),n=c[0],a=c[1],i=y(),r=Object(b.a)(i,5),o=r[0],l=r[1],d=r[2],u=r[3],p=r[4],h=W({withBackdrop:!0,useTimer:!1,inPlace:!1}),f=Object(b.a)(h,3),x=f[0],v=f[1],g=f[2],_=O(Object(m.a)({},e.name,e.value),(function(){p("/api/account".concat(e.api),e.method,E)}),k),N=Object(b.a)(_,5),w=N[0],C=N[1],S=N[2],E=N[3],P=N[4];return Object(s.useEffect)((function(){d&&403!==u?e.sendMsg(d,"mdl-error"):l&&l.msg&&(e.sendMsg(l.msg,"mdl-ok"),e.update(),a(!1))}),[l,d]),Object(s.useEffect)((function(){403===u&&v(Object(j.jsx)(me,{view:"confirm",inModal:!0,closeModal:g,afterConfirm:C,user:e.user}))}),[u]),Object(j.jsxs)(j.Fragment,{children:[x,o&&Object(j.jsx)(F,{}),Object(j.jsxs)("b",{children:[e.title,":"]}),n?Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:C,children:["us_state"===e.name&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("select",{placeholder:"State",name:"us_state",onChange:S,value:E.us_state||"",children:[Object(j.jsx)("option",{value:"",children:"Select state"},"-"),ce.map((function(e){return Object(j.jsx)("option",{value:ce.name,children:e.name},e.abbreviation)}))]},"6"),Object(j.jsx)("div",{className:"form-danger",children:P.us_state&&P.us_state})]}),"password"===e.name&&Object(j.jsxs)("div",{className:"prf-change-pass",children:[Object(j.jsx)("input",{placeholder:"New password",type:"password",name:e.name,onChange:S,value:E[e.name]||""}),Object(j.jsx)("p",{}),Object(j.jsx)("input",{placeholder:"Confirm new password",type:"password",name:"confirm_pass",onChange:S,value:E.confirm_pass||""}),Object(j.jsx)("div",{className:"form-danger",children:P.confirm_pass&&P.confirm_pass})]}),"us_state"!==e.name&&"password"!==e.name&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{placeholder:"",type:"text",name:e.name,onChange:S,value:E[e.name]||""}),Object(j.jsx)("div",{className:"form-danger",children:P[e.name]&&P[e.name]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{type:"submit",disabled:o}),Object(j.jsx)("button",{onClick:function(){a(!1),w(Object(m.a)({},e.name,e.value))},children:"Cancel"})]})]})}):Object(j.jsxs)(j.Fragment,{children:["password"===e.name?Object(j.jsx)("p",{}):e.value?e.children:Object(j.jsx)("p",{children:"Empty"}),Object(j.jsx)("a",{onClick:function(){a(!0)},children:"password"===e.name?"Change password":"Edit"})]}),Object(j.jsx)("br",{})]})},Re=function(e){var t=e.currTab,c=Object(d.f)(),n=Object(s.useState)(!1),a=Object(b.a)(n,2),i=a[0],r=a[1],o=K(1300),l=function(){o||r(!1)};return Object(s.useEffect)((function(){r(o)}),[o]),Object(j.jsxs)("div",{className:B()("prf-side-menu",{"prf-side-menu-closed":!i}),children:[Object(j.jsxs)("div",{className:"prf-side-content",children:[Object(j.jsx)("div",{onClick:function(){r(!i)},className:"prf-side-hamb",children:i?Object(j.jsx)(U.e,{}):Object(j.jsx)(U.b,{})}),Object(j.jsxs)("p",{className:B()({"prf-side-active":!t}),onClick:function(){t&&c.push("/profile/edit"),l()},children:[Object(j.jsx)("span",{children:Object(j.jsx)(U.d,{})}),Object(j.jsx)("span",{className:B()("prf-side-title",{"prf-side-title-closed":!i}),children:"Public information"})]}),Object(j.jsxs)("p",{className:B()({"prf-side-active":"private"===t}),onClick:function(){"private"!==t&&c.push("/profile/edit/private"),l()},children:[Object(j.jsx)("span",{children:Object(j.jsx)(U.c,{})}),Object(j.jsx)("span",{className:B()("prf-side-title",{"prf-side-title-closed":!i}),children:"Private information"})]}),Object(j.jsxs)("p",{className:B()({"prf-side-active":"address"===t}),onClick:function(){"address"!==t&&c.push("/profile/edit/address"),l()},children:[Object(j.jsx)("span",{children:Object(j.jsx)(U.a,{})}),Object(j.jsx)("span",{className:B()("prf-side-title",{"prf-side-title-closed":!i}),children:"Address"})]})]}),Object(j.jsxs)("div",{className:"prf-side-back",children:[Object(j.jsx)("div",{className:B()("prf-back-left",{"prf-back-left-closed":!i})}),Object(j.jsx)("div",{className:B()("prf-back-right",{"prf-back-right-closed":!i})})]})]})},Le=function(e){var t=e.tab,c=Object(_.d)(G,_.b),n=Object(_.c)(),a=Object(s.useState)(t),i=Object(b.a)(a,2),r=i[0],o=i[1],u=y(),m=Object(b.a)(u,5),O=m[0],h=m[1],f=m[2],x=m[3],v=m[4],g=y(),N=Object(b.a)(g,5),w=N[1],C=N[2],k=N[3],S=N[4],E=Object(d.f)(),P=function(){v("/api/account/get_profile_private","POST",{})};Object(s.useEffect)((function(){c.email||P()}),[]),Object(s.useEffect)((function(){o(t)}),[t]),Object(s.useEffect)((function(){h&&h.msg?n(T({open:!0,msg:h.msg,classes:"mdl-ok"})):h&&n(Z(Object(p.a)({},h))),f&&n(T({open:!0,msg:f,classes:"mdl-error"}))}),[h,f,x]),Object(s.useEffect)((function(){C?n(T({open:!0,msg:C,classes:"mdl-error"})):w&&w.msg&&n(T({open:!0,msg:w.msg,classes:"mdl-ok"}))}),[w,C,k]);var M=function(e,t){n(T({open:!0,msg:e,classes:t}))};return Object(j.jsxs)(j.Fragment,{children:[O&&Object(j.jsx)(F,{}),Object(j.jsx)(X,{edit:!0}),Object(j.jsx)("button",{className:"prf-return-button",onClick:function(){E.push("/profile")},children:"Return to profile"}),c&&Object(j.jsxs)("div",{className:"prf-edit",children:[Object(j.jsx)(Re,{currTab:r}),Object(j.jsx)("div",{className:"prf-col"}),!r&&Object(j.jsxs)("div",{className:"prf-block",children:[Object(j.jsx)("h2",{children:"Public Information"}),Object(j.jsx)("p",{}),Object(j.jsxs)("div",{className:"prf-field",children:[Object(j.jsx)(De,{name:"first_name",title:"First name",api:"/edit_profile",method:"PATCH",update:P,sendMsg:M,value:c.first_name,children:Object(j.jsx)("p",{children:c.first_name})}),Object(j.jsx)("hr",{})]}),Object(j.jsxs)("div",{className:"prf-field",children:[Object(j.jsx)(De,{name:"profile_addr",title:"Profile address",api:"/edit_profile_address",method:"PATCH",update:P,sendMsg:M,value:c.profile_addr,children:Object(j.jsx)("p",{children:Object(j.jsxs)(l.b,{to:"/profile/".concat(c.profile_addr),children:[ye.baseUrl,c.profile_addr]})})}),Object(j.jsx)("hr",{})]})]}),"private"===r&&Object(j.jsx)("div",{className:"prf-block",children:Object(j.jsxs)("div",{className:"",children:[Object(j.jsx)("h2",{children:"Private information"}),Object(j.jsxs)("div",{className:"prf-field",children:[Object(j.jsxs)(De,{name:"new_email",title:"Email",api:"/request_change_email",method:"POST",update:P,sendMsg:M,user:c.email,value:c.email,children:[Object(j.jsx)("div",{children:Object(j.jsx)(te,{verified:c.email_verified,children:Object(j.jsx)("p",{className:"inline-block",children:c.email})})}),Object(j.jsx)("p",{})]}),!c.email_verified&&Object(j.jsx)("div",{children:Object(j.jsx)("a",{onClick:function(){S("/api/auth/resend_email","POST",{},!0)},children:"Resend confirmation email"})}),Object(j.jsx)("hr",{})]}),Object(j.jsxs)("div",{className:"prf-field",children:[Object(j.jsx)(De,{name:"username",title:"Username",api:"/edit_username",method:"PATCH",update:P,sendMsg:M,user:c.email,value:c.username,children:Object(j.jsx)("p",{children:c.username})}),Object(j.jsx)("hr",{})]}),Object(j.jsxs)("div",{className:"prf-field",children:[Object(j.jsx)(De,{name:"last_name",title:"Last name",api:"/edit_profile",method:"PATCH",update:P,sendMsg:M,value:c.last_name,children:Object(j.jsx)("p",{children:c.last_name})}),Object(j.jsx)("hr",{})]}),Object(j.jsxs)("div",{className:"prf-field",children:[Object(j.jsx)(De,{name:"password",user:c.email,title:"Change password",api:"/change_pass",method:"PATCH",update:P,sendMsg:M,value:c.password,children:Object(j.jsx)("p",{children:c.password})}),Object(j.jsx)("hr",{})]})]})}),"address"===r&&Object(j.jsxs)("div",{className:"prf-block",children:[Object(j.jsx)("h2",{children:"Address"}),Object(j.jsxs)("div",{className:"prf-field",children:[Object(j.jsx)(De,{name:"address",title:"Address",api:"/edit_profile",method:"PATCH",update:P,sendMsg:M,value:c.address,children:Object(j.jsx)("p",{children:c.address})}),Object(j.jsx)("hr",{})]}),Object(j.jsxs)("div",{className:"prf-field",children:[Object(j.jsx)(De,{name:"city",title:"City",api:"/edit_profile",method:"PATCH",update:P,sendMsg:M,value:c.city,children:Object(j.jsx)("p",{children:c.city})}),Object(j.jsx)("hr",{})]}),Object(j.jsxs)("div",{className:"prf-field",children:[Object(j.jsx)(De,{name:"us_state",title:"State",api:"/edit_profile",method:"PATCH",update:P,sendMsg:M,value:c.us_state,children:Object(j.jsx)("p",{children:c.us_state})}),Object(j.jsx)("hr",{})]}),Object(j.jsxs)("div",{className:"prf-field",children:[Object(j.jsx)(De,{name:"zip_code",title:"Zip code",api:"/edit_profile",method:"PATCH",update:P,sendMsg:M,value:c.zip_code,children:Object(j.jsx)("p",{children:c.zip_code})}),Object(j.jsx)("hr",{})]})]}),Object(j.jsx)("div",{className:"prf-col"})]})]})};var ze=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(l.a,{children:[Object(j.jsx)(Ie,{}),Object(j.jsxs)(d.c,{children:[Object(j.jsx)(d.a,{exact:!0,path:"/",component:L}),Object(j.jsx)(d.a,{path:"/login",children:Object(j.jsx)(me,{view:"login"})}),Object(j.jsx)(d.a,{path:"/signup",children:Object(j.jsx)(me,{view:"signup"})}),Object(j.jsx)(d.a,{path:"/profile",component:de,exact:!0}),Object(j.jsx)(d.a,{path:"/chats",exact:!0,children:Object(j.jsx)(de,{tab:"chats",exact:!0})}),Object(j.jsx)(d.a,{path:"/profile/edit",component:Le,exact:!0}),Object(j.jsx)(d.a,{path:"/profile/edit/private",children:Object(j.jsx)(Le,{tab:"private"})}),Object(j.jsx)(d.a,{path:"/profile/edit/address",children:Object(j.jsx)(Le,{tab:"address"})}),Object(j.jsx)(d.a,{path:"/add-product",component:Me,exact:!0}),Object(j.jsx)(d.a,{path:"/user-products",component:le}),Object(j.jsx)(d.a,{path:"/edit-product",component:Fe}),Object(j.jsx)(d.a,{path:"/product-info",component:Ae}),Object(j.jsx)(d.a,{path:"/chats/:name",component:ke}),Object(j.jsx)(d.a,{path:"/profile/:addr",component:Oe}),Object(j.jsx)(d.a,{path:"/search-results",component:be}),Object(j.jsx)(d.a,{path:"/reset_password",children:Object(j.jsx)(he,{reset:!0})}),Object(j.jsx)(d.a,{path:"/reset_password_confirm/:token",component:he}),Object(j.jsx)(d.a,{path:"*",component:pe})]}),Object(j.jsx)("div",{className:"filler"})]}),Object(j.jsx)(fe,{}),Object(j.jsx)(R,{})]})},He=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,186)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))},Be=Object(S.a)({reducer:{modal:I,profile:q}});o.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(_.a,{store:Be,children:Object(j.jsx)(ze,{})})}),document.getElementById("root")),He()},30:function(e){e.exports=JSON.parse('[{"name":"Alabama","abbreviation":"AL"},{"name":"Alaska","abbreviation":"AK"},{"name":"Arizona","abbreviation":"AZ"},{"name":"Arkansas","abbreviation":"AR"},{"name":"California","abbreviation":"CA"},{"name":"Colorado","abbreviation":"CO"},{"name":"Connecticut","abbreviation":"CT"},{"name":"Delaware","abbreviation":"DE"},{"name":"District Of Columbia","abbreviation":"DC"},{"name":"Florida","abbreviation":"FL"},{"name":"Georgia","abbreviation":"GA"},{"name":"Hawaii","abbreviation":"HI"},{"name":"Idaho","abbreviation":"ID"},{"name":"Illinois","abbreviation":"IL"},{"name":"Indiana","abbreviation":"IN"},{"name":"Iowa","abbreviation":"IA"},{"name":"Kansas","abbreviation":"KS"},{"name":"Kentucky","abbreviation":"KY"},{"name":"Louisiana","abbreviation":"LA"},{"name":"Maine","abbreviation":"ME"},{"name":"Maryland","abbreviation":"MD"},{"name":"Massachusetts","abbreviation":"MA"},{"name":"Michigan","abbreviation":"MI"},{"name":"Minnesota","abbreviation":"MN"},{"name":"Mississippi","abbreviation":"MS"},{"name":"Missouri","abbreviation":"MO"},{"name":"Montana","abbreviation":"MT"},{"name":"Nebraska","abbreviation":"NE"},{"name":"Nevada","abbreviation":"NV"},{"name":"New Hampshire","abbreviation":"NH"},{"name":"New Jersey","abbreviation":"NJ"},{"name":"New Mexico","abbreviation":"NM"},{"name":"New York","abbreviation":"NY"},{"name":"North Carolina","abbreviation":"NC"},{"name":"North Dakota","abbreviation":"ND"},{"name":"Ohio","abbreviation":"OH"},{"name":"Oklahoma","abbreviation":"OK"},{"name":"Oregon","abbreviation":"OR"},{"name":"Pennsylvania","abbreviation":"PA"},{"name":"Rhode Island","abbreviation":"RI"},{"name":"South Carolina","abbreviation":"SC"},{"name":"South Dakota","abbreviation":"SD"},{"name":"Tennessee","abbreviation":"TN"},{"name":"Texas","abbreviation":"TX"},{"name":"Utah","abbreviation":"UT"},{"name":"Vermont","abbreviation":"VT"},{"name":"Virginia","abbreviation":"VA"},{"name":"Washington","abbreviation":"WA"},{"name":"West Virginia","abbreviation":"WV"},{"name":"Wisconsin","abbreviation":"WI"},{"name":"Wyoming","abbreviation":"WY"},{"name":"Other","abbreviation":""}]')},34:function(e,t,c){},63:function(e,t,c){},72:function(e,t,c){}},[[182,1,2]]]);
//# sourceMappingURL=main.be39075e.chunk.js.map
(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{21:function(e){e.exports=JSON.parse('[{"name":"Alabama","abbreviation":"AL"},{"name":"Alaska","abbreviation":"AK"},{"name":"Arizona","abbreviation":"AZ"},{"name":"Arkansas","abbreviation":"AR"},{"name":"California","abbreviation":"CA"},{"name":"Colorado","abbreviation":"CO"},{"name":"Connecticut","abbreviation":"CT"},{"name":"Delaware","abbreviation":"DE"},{"name":"District Of Columbia","abbreviation":"DC"},{"name":"Florida","abbreviation":"FL"},{"name":"Georgia","abbreviation":"GA"},{"name":"Hawaii","abbreviation":"HI"},{"name":"Idaho","abbreviation":"ID"},{"name":"Illinois","abbreviation":"IL"},{"name":"Indiana","abbreviation":"IN"},{"name":"Iowa","abbreviation":"IA"},{"name":"Kansas","abbreviation":"KS"},{"name":"Kentucky","abbreviation":"KY"},{"name":"Louisiana","abbreviation":"LA"},{"name":"Maine","abbreviation":"ME"},{"name":"Maryland","abbreviation":"MD"},{"name":"Massachusetts","abbreviation":"MA"},{"name":"Michigan","abbreviation":"MI"},{"name":"Minnesota","abbreviation":"MN"},{"name":"Mississippi","abbreviation":"MS"},{"name":"Missouri","abbreviation":"MO"},{"name":"Montana","abbreviation":"MT"},{"name":"Nebraska","abbreviation":"NE"},{"name":"Nevada","abbreviation":"NV"},{"name":"New Hampshire","abbreviation":"NH"},{"name":"New Jersey","abbreviation":"NJ"},{"name":"New Mexico","abbreviation":"NM"},{"name":"New York","abbreviation":"NY"},{"name":"North Carolina","abbreviation":"NC"},{"name":"North Dakota","abbreviation":"ND"},{"name":"Ohio","abbreviation":"OH"},{"name":"Oklahoma","abbreviation":"OK"},{"name":"Oregon","abbreviation":"OR"},{"name":"Pennsylvania","abbreviation":"PA"},{"name":"Rhode Island","abbreviation":"RI"},{"name":"South Carolina","abbreviation":"SC"},{"name":"South Dakota","abbreviation":"SD"},{"name":"Tennessee","abbreviation":"TN"},{"name":"Texas","abbreviation":"TX"},{"name":"Utah","abbreviation":"UT"},{"name":"Vermont","abbreviation":"VT"},{"name":"Virginia","abbreviation":"VA"},{"name":"Washington","abbreviation":"WA"},{"name":"West Virginia","abbreviation":"WV"},{"name":"Wisconsin","abbreviation":"WI"},{"name":"Wyoming","abbreviation":"WY"},{"name":"Other","abbreviation":""}]')},28:function(e,t,n){},39:function(e,t,n){},50:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),s=n(20),i=n.n(s),r=(n(50),n(10)),o=n(5),l=n(3),d=n(7),j=n.n(d),b=n(18),u=n(4),m=n(25),O=n.n(m),p=function(){return localStorage.getItem("access_token")&&localStorage.getItem("refresh_token")},h=function(e,t){switch(t.type){case"SEND":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0,errorNum:null,error:null,data:null});case"RESPONSE":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,data:t.responseData});case"ERROR":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,error:t.errorMessage,errorNum:t.errorNum});default:return}},f=function(){var e=Object(a.useReducer)(h,{isLoading:!1,error:null,errorNum:null,data:null}),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(o.f)(),i=Object(a.useCallback)(function(){var e=Object(b.a)(j.a.mark((function e(t,n,a){var i,r,o,l,d,b,m=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=m.length>3&&void 0!==m[3]&&m[3])){e.next=5;break}if(p()){e.next=5;break}return s.push("/login"),e.abrupt("return");case 5:return r={},i&&(r.Authorization="Bearer "+localStorage.getItem("access_token")),c({type:"SEND"}),o={method:n,url:t,data:a,headers:r,timeout:5e3},e.next=11,O()(o).then((function(e){return e}),(function(e){return e.response}));case 11:if(l=e.sent){e.next=15;break}return c({type:"ERROR",errorMessage:"Something went wrong",errorNum:500}),e.abrupt("return");case 15:if(!i||401!==l.status){e.next=35;break}return console.log("useRequest: refresh_token"),e.next=19,O()({method:"post",url:"/api/auth/refresh",data:{},timeout:5e3,headers:{Authorization:"Bearer "+localStorage.getItem("refresh_token")}}).then((function(e){return e}),(function(e){return e.response}));case 19:if(d=e.sent){e.next=23;break}return c({type:"ERROR",errorMessage:"Something went wrong",errorNum:500}),e.abrupt("return");case 23:if(!(d.status>=200&&d.status<300)){e.next=34;break}return localStorage.setItem("access_token",d.data.access_token),b=Object(u.a)(Object(u.a)({},o),{},{headers:{Authorization:"Bearer "+localStorage.getItem("access_token")}}),e.next=28,O()(b).then((function(e){return e}),(function(e){return e.response}));case 28:if(l=e.sent){e.next=32;break}return c({type:"ERROR",errorMessage:"Something went wrong",errorNum:500}),e.abrupt("return");case 32:e.next=35;break;case 34:l=d;case 35:l.status>=200&&l.status<300?c({type:"RESPONSE",responseData:l.data}):l.data.error?c({type:"ERROR",errorMessage:l.data.error,errorNum:l.status}):401===l.status?c({type:"ERROR",errorMessage:"Authorization denied. Please sign in or sign up",errorNum:401}):403===l.status?c({type:"ERROR",errorMessage:"Not enough privileges",errorNum:403}):c({type:"ERROR",errorMessage:"Something went wrong",errorNum:l.status});case 36:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[]);return[n.isLoading,n.data,n.error,n.errorNum,i]},x=n(1),v=function(){var e=f(),t=Object(l.a)(e,5),n=(t[0],t[1],t[2],t[3],t[4],Object(o.f)());return Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){localStorage.getItem("access_token")?n.push("/add-product"):n.push("/login")},children:"Share"})})},g=(n(79),function(e){return Object(x.jsx)("div",{className:"center",children:Object(x.jsxs)("div",{className:"indicator",children:[Object(x.jsx)("div",{className:"ind-chase-dot"}),Object(x.jsx)("div",{className:"ind-chase-dot"}),Object(x.jsx)("div",{className:"ind-chase-dot"}),Object(x.jsx)("div",{className:"ind-chase-dot"}),Object(x.jsx)("div",{className:"ind-chase-dot"}),Object(x.jsx)("div",{className:"ind-chase-dot"})]})})}),_=(n(80),function(e){var t=e.children,n=e.parent,c=Object(a.useMemo)((function(){return document.createElement("div")}),[]);return Object(a.useEffect)((function(){var e=n&&n.appendChild?n:document.body;return e.appendChild(c),function(){e.removeChild(c)}}),[c,n]),i.a.createPortal(t,c)}),N=n(12),y=n.n(N),w=(n(81),c.a.createContext()),C=function(e){var t=Object(a.useState)({open:!1,msg:null,classes:null}),n=Object(l.a)(t,2),c=n[0],s=n[1];return Object(x.jsx)(w.Provider,{value:[c,s],children:e.children})},E=function(e,t){switch(t.type){case"setActive":return Object(u.a)(Object(u.a)({},e),{},{active:t.active});case"setChildren":return Object(u.a)(Object(u.a)({},e),{},{children:t.children,classes:t.classes});case"setOpen":return Object(u.a)(Object(u.a)({},e),{},{isOpen:t.isOpen});case"setModal":return Object(u.a)(Object(u.a)({},e),{},{modal:t.modal})}},k=function(e){var t=e.withBackdrop,n=e.useTimer,c=e.timeOut,s=e.inPlace,i=Object(a.useReducer)(E,{active:!1,isOpen:!1,children:null,classes:null,modal:null}),r=Object(l.a)(i,2),o=r[0],d=r[1],j=Object(a.useRef)(null),b=function(){d({type:"setOpen",isOpen:!1})},u=Object(a.useContext)(w),m=Object(l.a)(u,2)[1];return Object(a.useEffect)((function(){if(!0===t){var e=j.current,n=function(){return d({type:"setActive",active:o.isOpen})},a=function(e){return[27].indexOf(e.which)>=0&&b()},c=function(t){return t.target===e&&b()};return e&&(e.addEventListener("transitionend",n),e.addEventListener("click",c),window.addEventListener("keyup",a)),function(){e&&(e.removeEventListener("transitionend",n),e.removeEventListener("click",c)),window.removeEventListener("keyup",a)}}}),[o.isOpen,o.modal]),Object(a.useEffect)((function(){!o.isOpen||t||s?o.isOpen&&window.setTimeout((function(){document.activeElement.blur(),d({type:"setActive",active:o.isOpen})}),10):m({open:!0,msg:o.children,classes:o.classes})}),[o.isOpen]),Object(a.useEffect)((function(){var e;return o.isOpen&&n&&(e=setTimeout((function(){b()}),c||5e3)),function(){n&&clearTimeout(e)}}),[o.isOpen]),Object(a.useEffect)((function(){t?d({type:"setModal",modal:Object(x.jsx)("div",{children:(o.isOpen||o.active)&&Object(x.jsx)(_,{children:Object(x.jsx)("div",{ref:j,className:y()("backdrop",{"bd-active":o.active&&o.isOpen}),children:Object(x.jsx)("div",{className:y()("modal",{"mdl-active":o.active&&o.isOpen}),children:o.children})})})})}):s?d({type:"setModal",modal:Object(x.jsx)("div",{className:y()("mdl-inpl",o.classes,{"mdl-inpl-active":o.active&&o.isOpen}),children:o.children})}):x.Fragment}),[o.active,o.isOpen,o.children]),[o.modal,function(e,t){d({type:"setOpen",isOpen:!0}),d({type:"setChildren",children:e,classes:t})},b,o.isOpen]},S=n(11),M=function(e,t,n){var c=Object(a.useState)(Object(u.a)({},e)),s=Object(l.a)(c,2),i=s[0],r=s[1],o=Object(a.useState)({}),d=Object(l.a)(o,2),j=d[0],b=d[1];return[r,function(e){e&&e.preventDefault();var a=n(i),c=0===Object.keys(a).length;b(a),c&&t()},function(e){r(Object(u.a)(Object(u.a)({},i),{},Object(S.a)({},e.target.name,e.target.value)))},i,j]},P=n(21),A=function(e){var t={};return e.password&&e.confirm_pass&&(e.password!==e.confirm_pass&&(t.confirm_pass="Passwords don't match"),/^[A-z0-9.!?,+]{6,}$/i.test(e.password)||(t.confirm_pass="Password should be at least 6 characters. Allowed characters: A-z 0-9 . , ! ? +")),Object.entries(e).forEach((function(e){var n=Object(l.a)(e,2),a=n[0],c=n[1];"username"===a&&(/^[a-z0-9._]{0,}$/.test(c)||(t.username="Allowed characters: a-z 0-9 . _")),"password"===a&&(c||(t.password="Please enter your password")),"confirm_pass"===a&&(c||(t.confirm_pass="Passwords don't match")),"login"===a&&(c||(t.login="Please enter your username or email")),"email"===a&&(c?/^[A-Z0-9.,_%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(c)||(t.email="Invalid email address"):t.email="Enter your email"),"first_name"===a&&(c||(t.first_name="Please enter you name")),"state"===a&&(c||(t.state="Please select state")),"city"===a&&(c||(t.city="Please enter city")),"body"===a&&(c||(t.body="Please enter something"))})),t},I=function(e){var t=e.view,n=e.inModal,c=e.closeModal,s=e.user,i=e.afterConfirm,d=f(),j=Object(l.a)(d,5),b=j[0],u=j[1],m=j[2],O=j[3],h=j[4],v=Object(o.f)(),_=k({withBackdrop:!1,useTimer:!0,inPlace:!!n}),N=Object(l.a)(_,2),y=N[0],w=N[1];p()&&!n&&v.push("/profile");var C=M({},(function(e){h("login"===t||"confirm"===t?"/api/auth/login":"/api/auth/signup","post",R)}),A),E=Object(l.a)(C,5),S=E[0],I=E[1],T=E[2],R=E[3],F=E[4];return Object(a.useEffect)((function(){"login"===t?S({login:"",password:""}):"signup"===t?S({email:"",password:"",confirm_pass:"",username:"",first_name:"",state:"",city:""}):"confirm"===t&&S({login:s,password:""})}),[t]),Object(a.useEffect)((function(){u&&(localStorage.setItem("access_token",u.access_token),localStorage.setItem("refresh_token",u.refresh_token),function(e,t){localStorage.setItem(e,JSON.stringify(t))}("app_data",{first_name:u.first_name}),i&&i(),c?c():v.push("/profile"))}),[u]),Object(a.useEffect)((function(){m?w(m,"mdl-error"):u&&u.msg&&w(u.msg,"mdl-ok")}),[m,O,u]),Object(x.jsxs)("div",{children:[y,b&&Object(x.jsx)(g,{}),"login"===t&&Object(x.jsx)("h1",{children:"Log In"}),"signup"===t&&Object(x.jsx)("h1",{children:"Sign Up"}),"confirm"===t&&Object(x.jsx)("h1",{children:"Confirm identity"}),Object(x.jsxs)("form",{onSubmit:I,children:[Object(x.jsxs)("div",{className:"auth-inputs",children:["login"===t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("input",{type:"text",placeholder:"Email/Username",name:"login",onChange:T,value:R.login||""},"1"),Object(x.jsx)("div",{className:"form-danger",children:F.login&&F.login})]}),"signup"===t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("input",{type:"text",placeholder:"Username",name:"username",onChange:T,value:R.username||""}),Object(x.jsx)("div",{className:"form-danger",children:F.username&&F.username})]}),"signup"===t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("input",{type:"text",placeholder:"Email",name:"email",onChange:T,value:R.email||""}),Object(x.jsx)("div",{className:"form-danger",children:F.email&&F.email})]}),"confirm"===t&&Object(x.jsx)("p",{children:R.login}),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("input",{type:"password",placeholder:"Password",name:"password",onChange:T,value:R.password||""},"4"),Object(x.jsx)("div",{className:"form-danger",children:F.password&&F.password})]}),"signup"===t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("input",{type:"password",placeholder:"Confirm password",name:"confirm_pass",onChange:T,value:R.confirm_pass||""},"15"),Object(x.jsx)("div",{className:"form-danger",children:F.confirm_pass&&F.confirm_pass}),Object(x.jsx)("input",{type:"text",placeholder:"First Name",name:"first_name",onChange:T,value:R.first_name||""},"5"),Object(x.jsx)("div",{className:"form-danger",children:F.first_name&&F.first_name}),Object(x.jsxs)("select",{placeholder:"State",name:"state",onChange:T,value:R.state||"",children:[Object(x.jsx)("option",{value:"",children:"Select state"},"-"),P.map((function(e){return Object(x.jsx)("option",{value:P.name,children:e.name},e.abbreviation)}))]},"6"),Object(x.jsx)("div",{className:"form-danger",children:F.state&&F.state}),Object(x.jsx)("input",{type:"text",placeholder:"City",name:"city",onChange:T,value:R.city||""},"7"),Object(x.jsx)("div",{className:"form-danger",children:F.city&&F.city})]})]}),Object(x.jsx)("input",{type:"submit",disabled:b},"8")]}),n?null:"login"===t?Object(x.jsx)(r.b,{to:"/signup",children:"Sign Up"}):Object(x.jsx)(r.b,{to:"/login",children:"Login"}),Object(x.jsx)("p",{}),"login"===t&&Object(x.jsx)("a",{onClick:function(){v.push("/reset_password")},children:"Forgot your password?"})]})},T=(n(82),n(86)),R=n(87),F=function(){var e=Object(a.useState)("login"),t=Object(l.a)(e,2),n=t[0],c=t[1],s=function(){c("login"===n?"signup":"login")};return Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{disabled:"login"===n,className:y()("authButton",{active:"login"===n}),onClick:s,children:"Log In"}),Object(x.jsx)("button",{disabled:"signup"===n,className:y()("authButton",{active:"signup"===n}),onClick:s,children:"Sign Up"}),Object(x.jsx)(T.a,{children:Object(x.jsx)(R.a,{addEndListener:function(e,t){return e.addEventListener("transitionend",t,!1)},classNames:"fade",children:Object(x.jsx)(I,{view:n,inModal:!0})},n)})]})},L=function(){var e,t=Object(o.f)(),n=k({withBackdrop:!0,useTimer:!1,inPlace:!1}),a=Object(l.a)(n,3),c=a[0],s=a[1],i=a[2],d=function(e){e&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("app_data"),t.push("/")),i()},j=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:"Are you sure to logout?"}),Object(x.jsx)("button",{onClick:function(){return d(!0)},children:"Yes"}),Object(x.jsx)("button",{onClick:function(){return d(!1)},children:"No"})]});return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("nav",{className:"main-navbar",children:[Object(x.jsx)("div",{children:Object(x.jsx)(r.b,{to:"/",children:"instaHarvest"})}),Object(x.jsx)("div",{children:Object(x.jsx)(r.b,{to:"/add-product",children:"Share your Product"})}),p()?Object(x.jsxs)("div",{className:"main-navbar-links",children:[Object(x.jsx)("div",{children:(e="app_data",e&&JSON.parse(localStorage.getItem(e))).first_name}),Object(x.jsx)("a",{onClick:function(){return s(j)},children:"Logout"})]}):Object(x.jsx)("div",{className:"main-navbar-links",children:Object(x.jsx)("a",{onClick:function(){return s(Object(x.jsx)(F,{}))},children:"Sign In"})})]}),c]})},D=n(44),H=function(e){var t=e.product,n=e.onDelete,a=Object(o.f)();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{onClick:function(){return function(e){a.push("/product-info",[e])}(t)},style:{border:"1px solid black",margin:"5px"},className:"product",children:[Object(x.jsx)("p",{children:t.name}),Object(x.jsx)("p",{children:t.description}),Object(x.jsx)("p",{children:t.price})]}),Object(x.jsx)("button",{onClick:function(){return n(t.product_id)},children:"Delete Product"})]})},z=function(){var e=Object(D.a)(),t=e.register,n=e.handleSubmit,c=(e.setValue,f()),s=Object(l.a)(c,5),i=s[0],r=s[1],o=s[2],d=(s[3],s[4]),j=Object(a.useState)([]),b=Object(l.a)(j,2),u=b[0],m=b[1];return Object(a.useEffect)((function(){r&&m(r)}),[r]),Object(x.jsxs)(x.Fragment,{children:[o&&Object(x.jsxs)("h1",{children:["Error: ",o]}),i&&Object(x.jsx)("h1",{children:"Is Loading"}),0===u.length?Object(x.jsxs)("form",{onSubmit:n((function(e){d("/api/products/get-all","post",e)})),children:[Object(x.jsx)("input",{type:"text",placeholder:"Enter your location",name:"search_term",ref:t}),Object(x.jsx)("button",{type:"submit",children:"Find"})]}):Object(x.jsx)(H,{products:u.products})]})},B=function(){return Object(x.jsx)("footer",{children:"All Icons and copyrights"})},V=function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)(L,{}),Object(x.jsx)("h1",{children:"Welcome to instaHarvest"}),Object(x.jsx)(z,{}),Object(x.jsx)(v,{}),Object(x.jsx)(B,{})]})},W=(n(28),function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],s=n[1],i=f(),r=Object(l.a)(i,5),o=r[0],d=r[1],j=r[2],b=r[3],u=r[4],m=k({withBackdrop:!0,useTimer:!1,inPlace:!1}),O=Object(l.a)(m,3),p=O[0],h=O[1],v=O[2],_=M(Object(S.a)({},e.name,e.value),(function(){u("/api/account".concat(e.api),e.method,C,!0)}),A),N=Object(l.a)(_,5),y=(N[0],N[1]),w=N[2],C=N[3],E=N[4];return Object(a.useEffect)((function(){j&&401!==b?e.sendMsg(j,"mdl-error"):d&&d.msg&&(e.sendMsg(d.msg,"mdl-ok"),e.update(),s(!1))}),[d,j]),Object(a.useEffect)((function(){401===b&&h(Object(x.jsx)(I,{view:"confirm",inModal:!0,closeModal:v,afterConfirm:y,user:e.user}))}),[b]),Object(x.jsxs)(x.Fragment,{children:[p,o&&Object(x.jsx)(g,{}),Object(x.jsxs)("b",{children:[e.title,":"]}),c?Object(x.jsx)("div",{children:Object(x.jsxs)("form",{onSubmit:y,children:["state"===e.type?Object(x.jsxs)("select",{placeholder:"State",name:"state",onChange:w,value:C.state||"",children:[Object(x.jsx)("option",{value:"",children:"Select state"},"-"),P.map((function(e){return Object(x.jsx)("option",{value:P.name,children:e.name},e.abbreviation)}))]},"6"):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("input",{placeholder:"",type:"text",name:e.name,onChange:w,value:C[e.name]||""}),Object(x.jsx)("div",{className:"form-danger",children:E[e.name]&&E[e.name]})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"submit",disabled:o}),Object(x.jsx)("button",{onClick:function(){s(!1)},children:"Cancel"})]})]})}):Object(x.jsxs)(x.Fragment,{children:[e.value?e.children:Object(x.jsx)("p",{children:"Empty"}),Object(x.jsx)("a",{onClick:function(){s(!0)},children:"Edit"})]}),Object(x.jsx)("br",{})]})}),J=n(42),U=n(41),K=function(e){var t=e.verified,n=e.children;return Object(x.jsxs)("div",{children:[n,Object(x.jsxs)("span",{className:"tooltip",children:[t?Object(x.jsx)(U.a,{size:"24px",color:"#4e9340"}):Object(x.jsx)(J.a,{size:"24px"}),Object(x.jsx)("span",{className:"tooltiptext",children:t?"Email verified":"Email not verified"})]})]})},Y=function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(!1),r=Object(l.a)(i,2),d=r[0],j=(r[1],f()),b=Object(l.a)(j,5),m=b[0],O=b[1],p=b[2],h=b[3],v=b[4],_=f(),N=Object(l.a)(_,5),y=N[1],C=N[2],E=N[3],k=N[4],S=Object(a.useContext)(w),M=Object(l.a)(S,2)[1],P=Object(o.f)();Object(a.useEffect)((function(){v("/api/account/get_profile_private","POST",{},!0)}),[d]),Object(a.useEffect)((function(){O&&s(Object(u.a)({},O))}),[O]),Object(a.useEffect)((function(){p?M({open:!0,msg:p,classes:"mdl-error"}):O&&O.msg&&M({open:!0,msg:O.msg,classes:"mdl-ok"})}),[p,h,O]),Object(a.useEffect)((function(){C?M({open:!0,msg:C,classes:"mdl-error"}):y&&y.msg&&M({open:!0,msg:y.msg,classes:"mdl-error"})}),[y,C,E]);var A=function(){v("/api/account/get_profile_private","POST",{},!0)},I=function(e,t){M({open:!0,msg:e,classes:t})};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(L,{}),m&&Object(x.jsx)(g,{}),c&&Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Profile"}),Object(x.jsxs)("div",{className:"prf-block",children:[Object(x.jsx)("h2",{children:"Public Information"}),Object(x.jsx)("p",{}),Object(x.jsx)("img",{className:"prf-img",src:c.image_url}),Object(x.jsx)("button",{children:"Edit"}),Object(x.jsx)("div",{className:"prf-field",children:Object(x.jsx)(W,{name:"first_name",title:"First name",api:"/edit_profile",method:"PATCH",update:A,sendMsg:I,value:c.first_name,children:Object(x.jsx)("p",{children:c.first_name})})}),Object(x.jsx)("div",{className:"prf-field",children:Object(x.jsx)(W,{name:"profile_addr",title:"Profile address",api:"/edit_profile_address",method:"PATCH",update:A,sendMsg:I,value:c.profile_addr,children:Object(x.jsx)("p",{children:Object(x.jsxs)("a",{onClick:function(){P.push("/profile/".concat(c.profile_addr))},children:["https://instaharvest.com/",c.profile_addr]})})})})]}),Object(x.jsxs)("div",{className:"prf-block",children:[Object(x.jsx)("h2",{children:"Private information"}),Object(x.jsxs)("div",{className:"prf-field",children:[Object(x.jsxs)(W,{name:"new_email",title:"Email",api:"/request_change_email",method:"POST",update:A,sendMsg:I,user:c.email,value:c.email,children:[Object(x.jsx)("div",{children:Object(x.jsx)(K,{verified:c.email_verified,children:Object(x.jsx)("p",{className:"inline-block",children:c.email})})}),Object(x.jsx)("p",{})]}),!c.email_verified&&Object(x.jsx)("div",{children:Object(x.jsx)("a",{onClick:function(){k("/api/auth/resend_email","POST",{},!0)},children:"Resend confirmation email"})})]}),Object(x.jsx)("div",{className:"prf-field",children:Object(x.jsx)(W,{name:"username",title:"Username",api:"/edit_username",method:"PATCH",update:A,sendMsg:I,user:c.email,value:c.username,children:Object(x.jsx)("p",{children:c.username})})}),Object(x.jsx)("div",{className:"prf-field",children:Object(x.jsx)(W,{name:"last_name",title:"Last name",api:"/edit_profile",method:"PATCH",update:A,sendMsg:I,value:c.last_name,children:Object(x.jsx)("p",{children:c.last_name})})})]}),Object(x.jsxs)("div",{className:"prf-block",children:[Object(x.jsx)("div",{className:"prf-field",children:Object(x.jsx)(W,{name:"address",title:"Address",api:"/edit_profile",method:"PATCH",update:A,sendMsg:I,value:c.address,children:Object(x.jsx)("p",{children:c.address})})}),Object(x.jsx)("div",{className:"prf-field",children:Object(x.jsx)(W,{name:"city",title:"City",api:"/edit_profile",method:"PATCH",update:A,sendMsg:I,value:c.city,children:Object(x.jsx)("p",{children:c.city})})}),Object(x.jsx)("div",{className:"prf-field",children:Object(x.jsx)(W,{name:"state",title:"State",api:"/edit_profile",method:"PATCH",type:"state",update:A,sendMsg:I,value:c.state,children:Object(x.jsx)("p",{children:c.state})})}),Object(x.jsx)("div",{className:"prf-field",children:Object(x.jsx)(W,{name:"zip_code",title:"Zip code",api:"/edit_profile",method:"PATCH",update:A,sendMsg:I,value:c.zip_code,children:Object(x.jsx)("p",{children:c.zip_code})})})]})]})]})},Z=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],s=f(),i=Object(l.a)(s,5),r=(i[0],i[1]),o=(i[2],i[3],i[4]);return Object(a.useEffect)((function(){o("/api/products/get-all","post",null)}),[]),Object(a.useEffect)((function(){r&&c(r.products)}),[r]),Object(x.jsx)(x.Fragment,{children:n.map((function(e){return Object(x.jsx)("div",{children:Object(x.jsx)(H,{product:e})},e.product_id)}))})},$=function(){return Object(x.jsx)("h1",{children:"Page Not Found"})},G=function(e){var t=f(),n=Object(l.a)(t,5),c=n[0],s=n[1],i=n[2],r=(n[3],n[4]);return Object(a.useEffect)((function(){r("/api/account/".concat(e.match.params.addr),"GET",{})}),[]),Object(x.jsxs)(x.Fragment,{children:[c&&Object(x.jsx)(g,{}),Object(x.jsx)("h1",{}),i&&Object(x.jsx)("h1",{children:"Profile Not Found"}),s&&Object(x.jsxs)("div",{className:"",children:[Object(x.jsx)("img",{className:"prf-img",src:s.image_url}),Object(x.jsx)(K,{verified:s.email_verified,children:Object(x.jsx)("h2",{className:"inline-block",children:s.first_name})}),Object(x.jsxs)("p",{children:[s.city,","," ",P.find((function(e){return e.name===s.state})).abbreviation]}),Object(x.jsxs)("p",{children:["Joined: ",s.joined]})]})]})},q=function(e){var t=Object(o.f)(),n=f(),c=Object(l.a)(n,5),s=c[0],i=c[1],r=c[2],d=c[3],j=c[4],b=Object(a.useContext)(w),u=Object(l.a)(b,2)[1],m=M(e.reset?{email:""}:{password:"",confirm_pass:""},(function(){e.reset?j("/api/auth/reset_password","POST",{email:v.email}):j("/api/auth/reset_password_confirm","POST",{password:v.password,token:e.match.params.token})}),A),O=Object(l.a)(m,5),p=O[1],h=O[2],v=O[3],_=O[4];return Object(a.useEffect)((function(){r?u({open:!0,msg:r,classes:"mdl-error"}):i&&i.msg&&(u({open:!0,msg:i.msg,classes:"mdl-ok"}),e.reset,t.push("/login"))}),[r,d,i]),Object(x.jsxs)(x.Fragment,{children:[s&&Object(x.jsx)(g,{}),Object(x.jsx)("h1",{children:"Reset Password"}),e.reset?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:"Enter your email address below"}),Object(x.jsxs)("form",{onSubmit:p,children:[Object(x.jsx)("label",{children:"Email: "}),Object(x.jsx)("input",{type:"text",placeholder:"Email",name:"email",onChange:h,value:v.email||""},"9"),Object(x.jsx)("div",{className:"form-danger",children:_.email&&_.email}),Object(x.jsx)("input",{type:"submit",disabled:s},"8")]})]}):Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("form",{onSubmit:p,children:[Object(x.jsx)("label",{children:"New password: "}),Object(x.jsx)("input",{type:"password",placeholder:"Password",name:"password",onChange:h,value:v.password||""},"4"),Object(x.jsx)("div",{className:"form-danger",children:_.password&&_.password}),Object(x.jsx)("label",{children:"Confirm password: "}),Object(x.jsx)("input",{type:"password",placeholder:"Confirm password",name:"confirm_pass",onChange:h,value:v.confirm_pass||""},"15"),Object(x.jsx)("div",{className:"form-danger",children:_.confirm_pass&&_.confirm_pass}),Object(x.jsx)("input",{type:"submit",disabled:s},"87")]})})]})},X=function(e){var t=Object(a.useContext)(w),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(!1),r=Object(l.a)(i,2),o=r[0],d=r[1];return Object(a.useEffect)((function(){c.open&&window.setTimeout((function(){document.activeElement.blur(),d(c.open)}),10)}),[c]),Object(a.useEffect)((function(){var e;return c.open&&(e=setTimeout((function(){s({open:!1,msg:null,classes:null})}),c.timeOut?c.timeOut:7e3)),function(){clearTimeout(e)}}),[c]),Object(a.useEffect)((function(){var e;return c.open&&(e=setTimeout((function(){d(!1)}),c.timeOut?c.timeOut-1e3:6e3)),function(){clearTimeout(e)}}),[o]),Object(x.jsx)(x.Fragment,{children:(c.open||o)&&Object(x.jsx)(_,{children:Object(x.jsx)("div",{className:y()("mdl-msg",c.classes,{"mdl-msg-active":o}),children:c.msg})})})},Q=(n(39),function(){var e=f(),t=Object(l.a)(e,5),n=t[0],c=t[1],s=t[2],i=t[3],r=t[4],d=Object(a.useContext)(w),j=Object(l.a)(d,2)[1],b=Object(o.f)();return Object(a.useEffect)((function(){r("/api/chat/get_user_chats","POST",{},!0)}),[]),Object(a.useEffect)((function(){s&&j({open:!0,msg:s,classes:"mdl-error"})}),[c,s,i]),Object(x.jsxs)(x.Fragment,{children:[n&&Object(x.jsx)(g,{}),c&&c.chats.map((function(e,t){return Object(x.jsxs)("div",{className:"prf-user-chats",onClick:function(){return t=e.recipient_id,n=e.recipient_name,a=e.recipient_img,void b.push({pathname:"/chats/".concat(n),state:{recipientId:t,recipientName:n,recipientImg:a}});var t,n,a},children:[Object(x.jsx)("img",{className:"chat-img",src:e.recipient_img}),Object(x.jsx)("div",{children:e.recipient_name})]},t)}))]})}),ee=n(8),te=n(43),ne=(n(83),function(e){var t=e.children,n=e.open,c=e.button,s=e.onClick,i=e.classContainer,r=e.classMenu,o=e.classActive,d=Object(a.useState)({clContainer:i||"menu-container",clMenu:r||"menu",clActive:o||"menu-active"}),j=Object(l.a)(d,1)[0],b=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=function(e){null===b.current||b.current.contains(e.target)||s()};if(n)return window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}),[n]),Object(x.jsxs)("div",{className:j.clContainer,children:[c,Object(x.jsx)("nav",{ref:b,className:y()(j.clMenu,Object(S.a)({},j.clActive,n)),children:t})]})}),ae=function(e){var t=e.msgId,n=e.onDeleteMsg,c=e.body,s=e.createdAt,i=e.sender,r=e.image,o=c.split("\n").map((function(e,t){return Object(x.jsx)("p",{children:e},t)})),d=Object(a.useState)(!1),j=Object(l.a)(d,2),b=j[0],u=j[1],m=function(){u(!b)};return Object(x.jsxs)("div",{className:y()("msg-container","Me"===i?"msg-cnt-self":"msg-cnt-reciv"),children:["Me"!==i&&Object(x.jsx)("img",{className:"chat-img",src:r}),Object(x.jsxs)("div",{className:y()("msg-body","Me"===i?"msg-body-self":"msg-body-reciv"),children:[o,Object(x.jsx)("p",{children:s})]}),"Me"===i&&Object(x.jsx)(ne,{open:b,button:Object(x.jsx)("button",{className:"msg-menu-button",onClick:m,children:Object(x.jsx)(te.a,{})}),onClick:m,children:Object(x.jsx)("p",{onClick:function(){n(t),u(!b)},children:"Delete"})})]})},ce=Object(a.memo)(ae),se=function(){var e=f(),t=Object(l.a)(e,5),n=t[0],c=t[1],s=t[2],i=t[3],r=t[4],d=f(),j=Object(l.a)(d,5),b=(j[0],j[1]),m=j[2],O=j[3],p=j[4],h=Object(a.useState)(null),v=Object(l.a)(h,2),_=v[0],N=v[1],y=Object(a.useRef)(),C=Object(o.g)(),E=Object(o.f)();C.state||E.push("/profile/chats");var k=C.state,S=k.recipientId,P=k.recipientName,I=(k.recipientImg,M({body:"",recipient_id:S},(function(e){p("/api/chat/send_message","POST",D,!0)}),A)),T=Object(l.a)(I,5),R=T[0],F=T[1],L=T[2],D=T[3],H=T[4],z=Object(a.useContext)(w),B=Object(l.a)(z,2)[1],V=function(e){p("/api/chat/delete_message","DELETE",{msg_id:e},!0)};return Object(a.useEffect)((function(){r("/api/chat/get_chat_between_users","POST",{recipient_id:S},!0)}),[]),Object(a.useEffect)((function(){s?B({open:!0,msg:s,classes:"mdl-error"}):c&&(R(Object(u.a)(Object(u.a)({},D),{},{chat_id:c.chat_id})),N(Object(ee.a)(c.msgs)))}),[s,i,c]),Object(a.useEffect)((function(){m?B({open:!0,msg:m,classes:"mdl-error"}):b&&(r("/api/chat/get_chat_messages","POST",{chat_id:c.chat_id},!0),R(Object(u.a)(Object(u.a)({},D),{},{body:""})))}),[b,m,O]),Object(a.useEffect)((function(){y.current&&y.current.scrollIntoView()}),[_]),Object(x.jsxs)(x.Fragment,{children:[n&&Object(x.jsx)(g,{}),Object(x.jsxs)("h1",{children:["Chat with ",P]}),Object(x.jsx)("div",{className:"chat-scroll",children:_&&_.map((function(e,t){var n=parseInt(e.sender_id)===parseInt(S)?P:"Me";return Object(x.jsx)("div",{ref:t===_.length-1?y:null,children:Object(x.jsx)(ce,{msgId:e.msg_id,onDeleteMsg:V,createdAt:e.created_at_str,sender:n,body:e.body,image:e.sender_img})},t)}))}),Object(x.jsxs)("form",{children:[Object(x.jsx)("textarea",{rows:3,type:"text",name:"body",onChange:L,value:D.body||""}),Object(x.jsx)("div",{className:"form-danger",children:H.body&&H.body}),Object(x.jsx)("button",{onClick:F,children:"Send"})]})]})},ie=function(){var e=Object(o.f)(),t=f(),n=Object(l.a)(t,5),c=n[0],s=n[1],i=n[2],r=n[3],d=n[4],j=Object(a.useContext)(w),b=Object(l.a)(j,2)[1],u=M({name:"",product_type:"",image_urls:[],price:0,status:"",description:""},(function(){d("/api/products/add-product","post",h,!0)}),A),m=Object(l.a)(u,5),O=(m[0],m[1]),p=m[2],h=m[3];m[4];return Object(a.useEffect)((function(){i?b({open:!0,msg:i,classes:"mdl-error"}):s&&(b({open:!0,msg:"Product has been added!",classes:"mdl-ok"}),e.push("/user-products"))}),[s,i,r]),Object(x.jsxs)("div",{children:[Object(x.jsx)(L,{}),Object(x.jsx)("h2",{children:"Add your product"}),c&&Object(x.jsx)(g,{}),Object(x.jsxs)("form",{onSubmit:O,children:[Object(x.jsx)("label",{children:"Name of your product"}),Object(x.jsx)("input",{placeholder:"Name",type:"text",name:"name",onChange:p,value:h.name}),Object(x.jsx)("label",{children:"Product Type:"}),Object(x.jsxs)("select",{name:"product_type",onChange:p,value:h.product_type,children:[Object(x.jsx)("option",{children:"Select Product Type"}),Object(x.jsx)("option",{children:"Fruit"}),Object(x.jsx)("option",{children:"Vegetable"}),Object(x.jsx)("option",{children:"Herb"}),Object(x.jsx)("option",{children:"Other"})]}),Object(x.jsx)("label",{children:"Pictures"}),Object(x.jsx)("input",{type:"file",name:"image_urls",onChange:p,value:h.image_urls}),Object(x.jsx)("label",{children:"Price: "}),Object(x.jsx)("input",{placeholder:"$0.00",type:"number",name:"price",onChange:p,value:h.price}),Object(x.jsx)("label",{children:"Description: "}),Object(x.jsx)("textarea",{placeholder:"Describe your product",type:"textarea",name:"description",onChange:p,value:h.description}),Object(x.jsx)("button",{children:"Add Product"})]})]})},re=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],s=f(),i=Object(l.a)(s,5),r=i[0],o=i[1],d=(i[2],i[3],i[4]),j=function(){d("/api/products/products-per-user","post",null,!0)};Object(a.useEffect)((function(){j()}),[]),Object(a.useEffect)((function(){o&&"deleted"===o.msg?j():o&&c(o.user_products)}),[o]);var b=function(e){d("/api/products/delete_product","delete",{product_id:e},!0)};return console.log(n),Object(x.jsxs)("div",{children:[Object(x.jsx)(L,{}),Object(x.jsx)("h2",{children:"All your products are here! "}),r&&Object(x.jsx)(g,{}),n&&n.map((function(e){return Object(x.jsx)("div",{children:Object(x.jsx)(H,{product:e,onDelete:b})},e.product_id)}))]})},oe=function(){var e=Object(o.g)(),t=f(),n=Object(l.a)(t,5),c=(n[0],n[1]),s=(n[2],n[3],n[4]),i=Object(a.useState)({}),r=Object(l.a)(i,2),d=r[0],j=r[1],b=e.state[0].user_id;return Object(a.useEffect)((function(){s("/api/products/product-location-info/".concat(b),"get")}),[]),Object(a.useEffect)((function(){c&&j(c)}),[c]),Object(x.jsxs)("div",{children:[d.lat," ",d.lgt]})};var le=function(){return Object(x.jsxs)(C,{children:[Object(x.jsx)(r.a,{children:Object(x.jsxs)(o.c,{children:[Object(x.jsx)(o.a,{exact:!0,path:"/",component:V}),Object(x.jsx)(o.a,{path:"/login",children:Object(x.jsx)(I,{view:"login"})}),Object(x.jsx)(o.a,{path:"/signup",children:Object(x.jsx)(I,{view:"signup"})}),Object(x.jsx)(o.a,{path:"/profile",component:Y,exact:!0}),Object(x.jsx)(o.a,{path:"/add-product",component:ie,exact:!0}),Object(x.jsx)(o.a,{path:"/user-products",component:re}),Object(x.jsx)(o.a,{path:"/product-info",component:oe}),Object(x.jsx)(o.a,{path:"/chats",component:Q,exact:!0}),Object(x.jsx)(o.a,{path:"/chats/:name",component:se}),Object(x.jsx)(o.a,{path:"/profile/:addr",component:G}),Object(x.jsx)(o.a,{path:"/buy",component:Z}),Object(x.jsx)(o.a,{path:"/reset_password",children:Object(x.jsx)(q,{reset:!0})}),Object(x.jsx)(o.a,{path:"/reset_password_confirm/:token",component:q}),Object(x.jsx)(o.a,{path:"*",component:$})]})}),Object(x.jsx)(X,{})]})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,88)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(le,{})}),document.getElementById("root")),de()}},[[84,1,2]]]);
//# sourceMappingURL=main.39cdf412.chunk.js.map